

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3. Core Transport Simulator (ETS) &mdash; EUROfusion Integrated Modelling workflows 3.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="4. Edge Transport Simulator" href="edge.html" />
    <link rel="prev" title="2. Infrastructure" href="infrastructure.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> EUROfusion Integrated Modelling workflows
          

          
          </a>

          
            
            
              <div class="version">
                3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">1. Introduction to the EUROfusion Project Code Development for integrated modelling</a></li>
<li class="toctree-l1"><a class="reference internal" href="infrastructure.html">2. Infrastructure</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">3. Core Transport Simulator (ETS)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#ets-documentation">3.1. ETS Documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#guide-on-using-ets-with-jet-data">3.1.1. Guide on using ETS with JET data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration-of-ets-workflow-in-kepler">3.1.2. Configuration of ETS workflow in Kepler</a></li>
<li class="toctree-l3"><a class="reference internal" href="#jet-data-to-ets">3.1.3. JET data to ETS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ets-releases">3.1.4. ETS releases</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ets-verification-and-validation">3.1.5. ETS verification and validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#useful-links">3.1.6. Useful links</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ets-workflows-in-kepler">3.2. ETS workflows in KEPLER</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuring-the-ets-run">3.2.1. Configuring the ETS run</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#workflow-parameters">3.2.1.1. Workflow parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ion-impurity-and-neutral-composition">3.2.1.2. Ion, Impurity and Neutral Composition</a></li>
<li class="toctree-l4"><a class="reference internal" href="#equations-to-be-solved-and-boundary-conditions">3.2.1.3. Equations to be solved and boundary conditions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#convergence-loop">3.2.1.4. Convergence loop</a></li>
<li class="toctree-l4"><a class="reference internal" href="#equilibrium">3.2.1.5. Equilibrium</a></li>
<li class="toctree-l4"><a class="reference internal" href="#transport">3.2.1.6. Transport</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mhd">3.2.1.7. MHD</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sources-and-impurity">3.2.1.8. Sources and impurity</a></li>
<li class="toctree-l4"><a class="reference internal" href="#instantaneous-events-actuators">3.2.1.9. Instantaneous events &amp; Actuators</a></li>
<li class="toctree-l4"><a class="reference internal" href="#scenario-output">3.2.1.10. Scenario output</a></li>
<li class="toctree-l4"><a class="reference internal" href="#visualization">3.2.1.11. Visualization</a></li>
<li class="toctree-l4"><a class="reference internal" href="#multiple-tab-display">3.2.1.12. Multiple Tab Display</a></li>
<li class="toctree-l4"><a class="reference internal" href="#python-visualization-display">3.2.1.13. Python Visualization Display</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#list-of-actors">3.2.2. List of Actors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#equilibrium-actors">3.2.2.1. Equilibrium actors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#core-transport-actors">3.2.2.2. Core transport actors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#edge-transport-actors">3.2.2.3. Edge transport actors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#heating-and-current-drive-actors">3.2.2.4. Heating and current drive actors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#events-actors">3.2.2.5. Events actors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#non-physics-actors">3.2.2.6. Non-physics actors</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ets-4-10a">3.3. ETS 4.10a</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#obtaining-the-ets">3.3.1. Obtaining the ETS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#updating-the-ets">3.3.2. Updating the ETS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#executing-the-ets">3.3.3. Executing the ETS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ets-a-4-10a-configuring">3.3.4. Configuring the ETS run</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ets-a-4-10a-workflow-parameters">3.3.4.1. Workflow Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#plasma-impurity-and-neutrals-composition">3.3.4.2. Plasma, Impurity and Neutrals Composition</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ets-a-4-10a-equations">3.3.4.3. Equations to be solved and boundary conditions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ets-a-4-10a-convergence">3.3.4.4. Convergence loop</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ets-a-4-10a-equilibrium">3.3.4.5. Equilibrium</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ets-a-4-10a-transport">3.3.4.6. Transport</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ets-a-4-10a-mhd">3.3.4.7. MHD</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ets-a-4-10a-sources">3.3.4.8. Sources and impurity</a></li>
<li class="toctree-l4"><a class="reference internal" href="#instantaneous-events">3.3.4.9. Instantaneous events</a></li>
<li class="toctree-l4"><a class="reference internal" href="#visualization-during-the-run">3.3.4.10. Visualization during the run</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="edge.html">4. Edge Transport Simulator</a></li>
<li class="toctree-l1"><a class="reference internal" href="es.html">5. Equilibrium and MHD Stability workflow (EQSTABIL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="eqreconstr.html">6. The EQRECONSTRUCT workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="transport.html">7. Turbulent Flux Quantities in Transport Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="averages.html">8. Running Exponential Average</a></li>
<li class="toctree-l1"><a class="reference internal" href="codes.html">9. Codes</a></li>
<li class="toctree-l1"><a class="reference internal" href="conventions.html">10. Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="kepler.html">11. Kepler</a></li>
<li class="toctree-l1"><a class="reference internal" href="amns.html">12. AMNS</a></li>
<li class="toctree-l1"><a class="reference internal" href="resources.html">13. Additional resources</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">EUROfusion Integrated Modelling workflows</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>3. Core Transport Simulator (ETS)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/WPCD-Workflows/documentation/blob/master/source/ets.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="core-transport-simulator-ets">
<h1>3. Core Transport Simulator (ETS)<a class="headerlink" href="#core-transport-simulator-ets" title="Permalink to this headline">¶</a></h1>
<div class="section" id="ets-documentation">
<h2>3.1. ETS Documentation<a class="headerlink" href="#ets-documentation" title="Permalink to this headline">¶</a></h2>
<p>This page contains useful information on the European Transport Simulator (ETS) including documentation, description of the pre and post-processing tools used with ETS as well as instructions on how to use ETS and tools at JET.</p>
<div class="section" id="guide-on-using-ets-with-jet-data">
<h3>3.1.1. Guide on using ETS with JET data<a class="headerlink" href="#guide-on-using-ets-with-jet-data" title="Permalink to this headline">¶</a></h3>
<p>ETS is a multi-machine modular transport simulator that can simulate different devices. This section provides a detailed guide on how to use ETS with JET data.</p>
<p>The guide can be found <a class="reference external" href="https://users.euro-fusion.org/tfwiki/index.php/Etsguide">here</a></p>
</div>
<div class="section" id="configuration-of-ets-workflow-in-kepler">
<h3>3.1.2. Configuration of ETS workflow in Kepler<a class="headerlink" href="#configuration-of-ets-workflow-in-kepler" title="Permalink to this headline">¶</a></h3>
<p>Instructions on the ETS configuration options can be found <a class="reference external" href="https://users.euro-fusion.org/tfwiki/images/5/56/Ets_config_v3.pdf">here</a></p>
<p>Instructions on HCD module in ETS can be found <a class="reference external" href="https://users.euro-fusion.org/tfwiki/images/4/4a/Hcd_config_v1.pdf">here</a></p>
<p>Instructions on impurities in ETS (including example workflow and plotting tools) can be found <a class="reference external" href="https://users.euro-fusion.org/pages/tfiospti/ETSmeetings/08Dec2017/Impurities_in_ETS_v5_dy.pdf">here</a></p>
</div>
<div class="section" id="jet-data-to-ets">
<h3>3.1.3. JET data to ETS<a class="headerlink" href="#jet-data-to-ets" title="Permalink to this headline">¶</a></h3>
<p>ETS uses a standard format for input/output data. In order to get data from different machines (in different formats, using different units) a dedicated tool called “exp2itm” is provided. This section describes how this tool can be used to convert JET data to be used in ETS.</p>
<p>Information about available data mappings is provided <a class="reference external" href="https://users.euro-fusion.org/tfwiki/index.php/Mappings_jet_ets">here</a>.</p>
<p>Guidelines to get JET data are provided <a class="reference external" href="https://users.euro-fusion.org/tfwiki/index.php/Get_jet_data_gen">here</a></p>
</div>
<div class="section" id="ets-releases">
<h3>3.1.4. ETS releases<a class="headerlink" href="#ets-releases" title="Permalink to this headline">¶</a></h3>
<p>Information related to the ETS releases is given in this section.</p>
<p><a class="reference external" href="https://users.euro-fusion.org/tfwiki/index.php/Changes_v510">changes, updates for ETS release 5.1.0</a></p>
<p><a class="reference external" href="https://users.euro-fusion.org/tfwiki/index.php/Changes_v503">changes, updates for ETS release 5.0.3</a></p>
<p><a class="reference external" href="https://users.euro-fusion.org/tfwiki/index.php/Changes_v502">changes, updates for ETS release 5.0.2</a></p>
</div>
<div class="section" id="ets-verification-and-validation">
<h3>3.1.5. ETS verification and validation<a class="headerlink" href="#ets-verification-and-validation" title="Permalink to this headline">¶</a></h3>
<p>Activities to verify ETS against other codes and to validate ETS against experimental data are summarized here (including instructions for users)</p>
<p><a class="reference external" href="https://users.euro-fusion.org/tfwiki/index.php/ETS_TRANSP_benchmark">ETS benchmark against TRANSP</a></p>
</div>
<div class="section" id="useful-links">
<h3>3.1.6. Useful links<a class="headerlink" href="#useful-links" title="Permalink to this headline">¶</a></h3>
<p>This section contains further links to documentation connected to ETS.</p>
<p>The training material is available here: <a class="reference external" href="https://users.euro-fusion.org/iterphysicswiki/index.php/ETS_Training_Tutorials">ETS Training Tutorials</a></p>
<ul class="simple">
<li><p><a class="reference external" href="http://portal.eufus.eu/twiki/bin/view/Main/Accessing_EUIM_infrastructure_at_JET">set up environment</a>, <a class="reference external" href="https://users.euro-fusion.org/iterphysicswiki/index.php/EU-IM_set_up_at_JET">EU-IM_set_up_at_JET</a></p></li>
<li><p>get ETS (see Running the ETS Workflow  in <a class="reference external" href="http://portal.eufus.eu/twiki/bin/view/Main/Accessing_EUIM_infrastructure_at_JET">set up environment</a>)</p></li>
<li><p><a class="reference external" href="http://www.eufus.eu/ITM/imports/isip/public/data_structure/4.10b.10/Phase4TOP.html">data structure to be used</a> (list of CPOs)</p></li>
<li><p>test pulses (in preparation)</p></li>
<li><p><a class="reference external" href="http://www.eufus.eu/ITM/html/ETS_A_4.10b_run_config.htmlsetupworkflowparameters">set up workflow parameters</a></p></li>
<li><p><a class="reference external" href="http://portal.eufus.eu/twiki/bin/view/Main/RunningKeplerViaQueue">run ETS in batch mode</a></p></li>
<li><p>Coordinate conventions, see <a class="reference external" href="http://www.eufus.eu/ITM/html/itm_conventions.html#itm_conventions_9">COCOS documentation</a>, <a class="reference external" href="http://www.sciencedirect.com/science?_ob=ArticleListURL&amp;_method=list&amp;_ArticleListID=-950871037&amp;_sort=r&amp;_st=13&amp;view=c&amp;md5=a2e468420878e8d72cc5cabfc2f184ff&amp;searchtype=a">COCOS paper</a></p></li>
<li><p><a class="reference external" href="http://portal.eufus.eu/twiki/bin/view/Main/Feedback_on_ETS?sso_from=bin/view/Main/Feedback_on_ETS">Feedback</a></p></li>
<li><p><a class="reference external" href="http://gforge6.eufus.eu/gf/project/generalsupport/tracker/?action=TrackerItemAdd&amp;tracker_id=184">Submit Report Request</a></p></li>
</ul>
<p><a class="reference external" href="https://users.euro-fusion.org/tfwiki/index.php/ETS_Users_Group">ETS Users Group</a> containing information related to the ETS User’s meetings</p>
<p><a class="reference external" href="https://users.euro-fusion.org/iterphysicswiki/index.php/ETS_Training_2018">ETS training 2018</a> web page for ETS training at JET 14-18 May 2018</p>
<ul class="simple">
<li><p><a class="reference external" href="https://portal.eufus.eu/documentation/ITM/imports/imp3/public/ETS_Documentation/ETS_TRANSPORT_EQUATIONS.pdf">Description of the ETS</a></p></li>
<li><p><a class="reference external" href="https://portal.eufus.eu/documentation/ITM/imports/imp3/public/ETS_Documentation/STANDARDISED_EQUATION.pdf">Form of the standardize equations</a></p></li>
<li><p><a class="reference external" href="https://portal.eufus.eu/documentation/ITM/imports/imp3/public/ETS_Documentation/ETS_User_Guide.pdf">ETS User Guide</a></p></li>
<li><p><a class="reference external" href="https://portal.eufus.eu/documentation/ITM/imports/imp3/public/ETS_Documentation/ETS_Status.pdf">ETS Status</a></p></li>
<li><p><a class="reference download internal" download="" href="_downloads/fcd733e8f7376d79e312931cd115c09e/ETS_TRANSPORT_EQUATIONS_V1.0.pdf"><code class="xref download docutils literal notranslate"><span class="pre">ETS</span> <span class="pre">Transport</span> <span class="pre">equations,</span> <span class="pre">variables</span> <span class="pre">and</span> <span class="pre">Fortran</span> <span class="pre">implementation</span></code></a></p></li>
</ul>
</div>
</div>
<div class="section" id="ets-workflows-in-kepler">
<span id="ets-in-kepler"></span><h2>3.2. ETS workflows in KEPLER<a class="headerlink" href="#ets-workflows-in-kepler" title="Permalink to this headline">¶</a></h2>
<p>The ETS workflow is used for 1-D transport simulation of a tokamak core
plasma.</p>
<p><strong>ETS workflows in KEPLER</strong>:</p>
<ul class="simple">
<li><p>use actors and composite actors from other IMPs, thus for the most
recent versions of them please check with relevant project</p></li>
<li><p>complex, but clearly structured workflow, which offers user friendly
interface for configuring the simulation</p></li>
<li><p>allow for easy modifications (connecting new modules, or reconnecting
parts of the workflow) through an easy graphical interface</p></li>
<li><p>provide users with all updates through the version control system</p></li>
<li><p>still in active development tool</p></li>
</ul>
<p>The default ETS release is the tag4.10b10.3</p>
<p><strong>Before installation make sure that:</strong></p>
<ul class="simple">
<li><p>you have your private data base for the version of the
UAL
required by the workflow</p></li>
<li><p>you have the version of
KEPLER
required by the workflow installed. Quick start on kepler required
for the ETS can be found
here</p></li>
<li><p>inside the window, where you will be downloading the ETS the source
command:</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;</span><span class="nb">source</span> <span class="nv">$EU</span>-IMSCRIPTDIR/EU-IMv1 Kepler_Version Data_Base_Name UAL_Version
</pre></div>
</div>
<p>is executed.</p>
<p><strong>To install your local copy of the ETS workflow please do:</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;</span>svn co https://gforge6.eufus.eu/svn/keplerworkflows/tags/ets_4.10b10.3/ETS
<span class="gp">&gt;</span><span class="nb">cd</span> ETS
<span class="gp">&gt;</span>make import_ets
</pre></div>
</div>
<p>Press the play button on the workflow.</p>
<div class="figure align-center">
<img alt="_images/ets_1.png" src="_images/ets_1.png" />
</div>
<p><strong>The workflow shall run!</strong> If it
does not, please use the contact from above.</p>
<p><strong>Starting the workflow:</strong>
If you have the workflow already installed, there are there are several
ways tio execute it:</p>
<ul class="simple">
<li><p>For execution via kepler GUI:</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;</span>kepler.sh workflow_path/workflow_name.xml
</pre></div>
</div>
<ul class="simple">
<li><p>For execution in none GUI mode:</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;</span>kepler.sh -runwf -nogui -redirectgui <span class="nv">$EU</span>-IMHOME/some_dir_name workflow_path/workflow_name.xml
</pre></div>
</div>
<ul>
<li><p>For execution in batch mode:
it is essential to keep the workflow inside your $EU-IMWORK area</p>
<p>it is essential to switch to scripts/R2.2 module</p>
</li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;</span>module switch scripts/R2.2
<span class="gp">&gt;</span>submit_batch_kepler.sh run_dircetory <span class="m">1</span> <span class="nv">$EU</span>-IMWORK/workflow_path/workflow_name.xml <span class="nv">$EU</span>-IMSCRIPTDIR/batch_submission/ParallelKepler.bsub
</pre></div>
</div>
<div class="section" id="configuring-the-ets-run">
<span id="ets-a-4-10b-run-config"></span><h3>3.2.1. Configuring the ETS run<a class="headerlink" href="#configuring-the-ets-run" title="Permalink to this headline">¶</a></h3>
<div class="section" id="workflow-parameters">
<span id="ets-a-4-10b-workflow-parameters"></span><h4>3.2.1.1. Workflow parameters<a class="headerlink" href="#workflow-parameters" title="Permalink to this headline">¶</a></h4>
<div class="section" id="general-parameters">
<h5>3.2.1.1.1. General Parameters<a class="headerlink" href="#general-parameters" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>USER
- your userid</p></li>
<li><p>MACHINE
- machine name (database name) for which comutations are done</p></li>
<li><p>SHOT_IN
- input shot number</p></li>
<li><p>RUN_IN
- input run number</p></li>
<li><p>SHOT_OUT
- output shot number</p></li>
<li><p>RUN_OUT
- output run number</p></li>
<li><p>NUMERICAL_SOLVER
- choice of the numerics solving transport equations (RECOMENDED
SELECTION: 3 or 4)</p></li>
</ul>
</div>
<div class="section" id="space-resolution">
<h5>3.2.1.1.2. Space resolution<a class="headerlink" href="#space-resolution" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>NRHO
- number of radial points for transport equations</p></li>
<li><p>NPSI
- number of points for equilibrium 1-D arrays</p></li>
<li><p>NEQ_DIM1
- number of points for equilibrium 2-D arrays, first index</p></li>
<li><p>NEQ_DIM2
- number of points for equilibrium 2-D arrays, second index</p></li>
<li><p>NEQ_MAX_NPOINTS
- maximum number of points for equilibrium boundary</p></li>
</ul>
</div>
<div class="section" id="time-resolution">
<h5>3.2.1.1.3. Time resolution<a class="headerlink" href="#time-resolution" title="Permalink to this headline">¶</a></h5>
<p><strong>Start and End time:</strong></p>
<ul class="simple">
<li><p>TBEGIN
- Computations start time</p></li>
<li><p>TEND
- Computattions end time</p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_config1.png" src="_images/ets_config1.png" />
</div>
<p><strong>Time step:</strong></p>
<ul class="simple">
<li><p>right click on the box
BEFORE THE TIME EVOLUTION</p></li>
<li><p>select
Configure actor</p></li>
<li><p>TAU
:specify value of the time step in [s]</p></li>
<li><p>TAU_OUT
: specify value of the output time interval in [s]</p></li>
<li><p>Commit</p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_settings1.png" src="_images/ets_settings1.png" />
</div>
</div>
</div>
<div class="section" id="ion-impurity-and-neutral-composition">
<span id="ets-a-4-10b-composition"></span><h4>3.2.1.2. Ion, Impurity and Neutral Composition<a class="headerlink" href="#ion-impurity-and-neutral-composition" title="Permalink to this headline">¶</a></h4>
<p>Before starting the run you need to define types of main ions, impurity
(optional) and neutrals (optional) to be included in simulations.</p>
<p>To define plasma composition:</p>
<ul class="simple">
<li><p>right click on the box
BEFORE THE TIME EVOLUTION</p></li>
<li><p>select <strong>Configure actor</strong></p></li>
<li><p>choose one of modes for setting
Run_compositions</p>
<ul>
<li><p>from_input_CPO
- will pick up the COMPOSITIONS structure of the COREPROF CPO
saved to the input shot;</p></li>
<li><p>configure_manually
- will force the composition from the values specified below</p></li>
</ul>
</li>
<li><p>specify values of atomic mass (AMN_ion), nuclear charge ( ZN_ion ) and
charge ( Z_ion , from the first ion to the last [1:NION] , separated by
commas</p></li>
<li><p>(optional) specify values of atomic mass ( AMN_imp ), nuclear charge (
ZN_imp ) and maximal ionization state ( max_Z_imp ) for impurity ions,
from the first to the last [1:NIMP] , separated by commas</p></li>
<li><p>(optional)for neutrals activate, by switchen them to <strong>ON</strong>, the types which
shall be followed by neutral solver</p></li>
<li><p>press <strong>Commit</strong></p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_plasma_composition.png" src="_images/ets_plasma_composition.png" />
</div>
</div>
<div class="section" id="equations-to-be-solved-and-boundary-conditions">
<span id="ets-a-4-10b-equations"></span><h4>3.2.1.3. Equations to be solved and boundary conditions<a class="headerlink" href="#equations-to-be-solved-and-boundary-conditions" title="Permalink to this headline">¶</a></h4>
<div class="section" id="main-plasma">
<h5>3.2.1.3.1. Main Plasma<a class="headerlink" href="#main-plasma" title="Permalink to this headline">¶</a></h5>
<p>Before starting the run you need to select the type and value of the
boundary conditions for all equations. Please note that the value should
correspond to the type. All equations allow for following types of
boundary conditions:</p>
<ul class="simple">
<li><p>OFF
- equation is not solved, initial profiles will be kept for whole run</p></li>
<li><p>value
- edge value should be specified</p></li>
<li><p>gradient
- edge gradient should be specified</p></li>
<li><p>scale_length
- edge scale length should be specified</p></li>
<li><p>generic
- generic form:
a1*y´ + a2*y = a3
of the boundary condition is assumed, 3 coefficients (a1, a2, a3) should be provided</p></li>
<li><p>value_from_input_CPO
- equation is solved, edge value evolution will be red from input
shot</p></li>
<li><p>profile_from_input_CPO
- equation is not solved, profile evolution will be red from input
shot</p></li>
</ul>
<p>The particular equation will be activated if the boundary condition type
for it is other than <em>OFF</em></p>
<div class="figure align-center">
<img alt="_images/ets_run_settings3.png" src="_images/ets_run_settings3.png" />
</div>
<p>To set up boundary conditions:</p>
<ul class="simple">
<li><p>right click on the box BEFORE THE TIME EVOLUTION</p></li>
<li><p>select <strong>Configure actor</strong></p></li>
<li><p>select appropriate boundary condition for each equation</p></li>
<li><p>specify values for boundary conditions corresponding to the type and
to the ion component</p></li>
<li><p><strong>Commit</strong></p></li>
</ul>
<p>The workflow will not allow the user all particle components
(ions[1:NION]+electrons) to be run predictively. At least one of them shall
be set to OFF (this component will be computed from quasi-neutrality
condition).</p>
<p>!!! If electron density is solved, all ions with ni_bnd_type=OFF will be
computed from the quasineutrality condition and scaled proportional to
specified <em>ni_bnd_value</em> or inversely proportional to their charge,
<em>charge_proportional</em>. This is defined by option:
<em>ni_from_quasineutrality</em>.</p>
</div>
<div class="section" id="impurity">
<h5>3.2.1.3.2. Impurity<a class="headerlink" href="#impurity" title="Permalink to this headline">¶</a></h5>
<p>You can set up the boundary conditions for impurity ions in a similar
way as for main ions. !!! Note, that at the moment only types: <em>OFF</em>;
<em>value</em> and <em>value_from_input_CPO</em> are accepter by impurity solver.</p>
<p>To set up boundary conditions:</p>
<ul class="simple">
<li><p>right click on the box BEFORE THE TIME EVOLUTION</p></li>
<li><p>select <strong>Configure actor</strong></p></li>
<li><p>select appropriate boundary condition for each impurity species (
OFF-equation is not solved)</p></li>
<li><p>specify values for boundary density of each impurity component
[1:MAX_Z_IMP], separated by commas</p></li>
<li><p><strong>Commit</strong></p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_run_settings4.png" src="_images/ets_run_settings4.png" />
</div>
<p>Interface for impurity boundary condition has additional option,
<em>coronal_distribution</em>, that allow to preset the edge values or entire
profiles of individual ionization states from coronal distribution. In tis
case only single value is required to be specified for each impurity
boundary value. The options are:</p>
<ul class="simple">
<li><p>OFF
- the boundary values for impurity densities will be as they are
specified above;</p></li>
<li><p>boundary_conditions
- the boundary densities will be renormalized with corona, using the
first element from above as a total density</p></li>
<li><p>boundary_conditions_and_profiles
- the boundary densities and starting profiles will be renormalized
with corona, using the first element from above as a total density</p></li>
</ul>
</div>
<div class="section" id="neutrals">
<h5>3.2.1.3.3. Neutrals<a class="headerlink" href="#neutrals" title="Permalink to this headline">¶</a></h5>
<p>!!! AT THE MOMENT BOUNDARY CONDITIONS FOR NEUTRAL VELOCITIES ARE DISABLED,
MIGHT BE ADDED ON REQUEST</p>
<p>Note, that ALL values should be specified in the order: {<em>1, 2, 3 …NION, 1, 2, 3, …NIMP</em>}</p>
<p>To set up boundary conditions:</p>
<ul class="simple">
<li><p>right click on the box BEFORE THE TIME EVOLUTION</p></li>
<li><p>select <strong>Configure actor</strong></p></li>
<li><p>select appropriate boundary condition for each neutral species (OFF-equation is not solved)</p></li>
<li><p>specify values for boundary density and temperature of each neutral component
[1, 2, 3 …NION, 1, 2, 3, …NIMP], separated by commas</p></li>
<li><p><strong>Commit</strong></p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_run_settings5.png" src="_images/ets_run_settings5.png" />
</div>
</div>
<div class="section" id="input-profiles-interpolation">
<h5>3.2.1.3.4. Input profiles interpolation<a class="headerlink" href="#input-profiles-interpolation" title="Permalink to this headline">¶</a></h5>
<p>You are going to start the ETS run from some input shot, which might
contain some conflicting rho grids saved to different CPOs. Thus there is a
choice for the user to decide on the grid on which the starting profiles
should be load by the worflow,</p>
<p><em>Interpolation_of_input_profiles</em>.</p>
<p>To define the interpolation grid select:</p>
<ul class="simple">
<li><p>on_RHO_TOR_grid
- interpolate input profiles based on the grid specyfied in [m];</p></li>
<li><p>on_RHO_TOR_NORM_grid
- interpolate input profiles based on normalised rho grid [0:1]</p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_run_settings6.png" src="_images/ets_run_settings6.png" />
</div>
</div>
</div>
<div class="section" id="convergence-loop">
<span id="ets-a-4-10b-convergence"></span><h4>3.2.1.4. Convergence loop<a class="headerlink" href="#convergence-loop" title="Permalink to this headline">¶</a></h4>
<p>ETS updates input from different physics actors in a sequence, which is
finished by solving the transport equations. Ther are possible
none-linear couplings between different parts of the system. These
nonelinearities are trited by the ETS using iterations. The decision to
step in time is made by the ETS based on the criteria that the maximum
relative deviation of main plasma profiles is lower than some predefined
tolerance. There is a number of settings and sitches in the ETS that are
used by the iterative scheme. To edit them do:</p>
<ul class="simple">
<li><p>right click on the box CONVERGENCE LOOP</p></li>
<li><p>select <strong>Configure actor</strong> to edit settings</p></li>
<li><p>choose your settings</p></li>
<li><p><strong>Commit</strong></p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_convergence1.png" src="_images/ets_convergence1.png" />
</div>
<p>Switches in the field <em>FREQUENCY OF CALLING THE PHYSICS ACTORS</em> define
how many times the the actors of a certain cathegory (equilibrium,
transport, etc.) should be called in a single time step.
By selecting <em>YES</em> all actors of this cathegory will be called every iteration
By selecting <em>NO</em> all actors of this cathegory will be called only ones in
a time step</p>
<p>Switches and parameters in the field <em>CONTROL PARAMETERS</em> define how
iterations are done</p>
<ul class="simple">
<li><p>Tolerance - defines the maximum relative error of profiles change compared to
previous iteration. If it is achieved the time steping is done.</p></li>
</ul>
<p>For highly none-linear case the required precision can be achieved
faster by the iterative scheme if only fraction of the new solution is
mixed to the previous state.
The following scheme is adopted by the ets to reduce none-linearities in profiles, transport coefficients and
sources:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Y = (Amix * Y+) + ((1-Amix)*Y-)</span>
</pre></div>
</div>
<p>where Amix is the mixing fraction You can activate the mixing of
profiles, transport coefficient and sources by selecting the
corresponding <em>Mixing_fraction_…</em> to be between [0:1]
You also can activate the authomatic ajustment of this fraction by selecting:
<em>Ajust_Mixing_for_…</em> to <em>YES</em></p>
</div>
<div class="section" id="equilibrium">
<span id="ets-a-4-10b-equilibrium"></span><h4>3.2.1.5. Equilibrium<a class="headerlink" href="#equilibrium" title="Permalink to this headline">¶</a></h4>
<div class="section" id="initialization-settings">
<h5>3.2.1.5.1. Initialization Settings<a class="headerlink" href="#initialization-settings" title="Permalink to this headline">¶</a></h5>
<p>Before starting the run you need to set up your initial equlibrium.
There are several options to do it: if your input shot contains the
consistent equilibrium with all necessary parameters - you can start
immediately from it; if your input shot contains the equilibrium but it
is not consistent or some parameters are missing you can check it
automatically; if your input equilibrium is corrupt or not present - you
can define the starting equlinbrium by tree moment description. To
select your starting equilibrium please do:</p>
<ul class="simple">
<li><p>right click on the box BEFORE THE TIME EVOLUTION</p></li>
<li><p>select <strong>Configure actor</strong> to edit settings</p></li>
<li><p>Select your settings or specify values</p></li>
<li><p><strong>Commit</strong></p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_before_time.png" src="_images/ets_before_time.png" />
</div>
<p>SETTINGS:</p>
<ul class="simple">
<li><p>Equilibrium_configuration
- select
configure_manually
if you like to specify configuration below; select
from_input_CPO
if all quantities should be picked up from the input CPO</p></li>
<li><p>R0_Machine_characteristic_radius
- Characteristic radius of the machine, here B0 is measured [m]</p></li>
<li><p>B0_Magnetic_field_at_R0
- Magnetic field measured at the position R0 [T]</p></li>
<li><p>RGEO_Major_Radius_of_LCMS_centre
- R coordinate of the geometrical centre of the LCMS [m]</p></li>
<li><p>ZGEO_Altitude_of_LCMS_centre
- Z coordinate of the geometrical centre of the LCMS [m]</p></li>
<li><p>Total_plasma_current_IP
- plasma current within the LCMS [A]</p></li>
<li><p>Minor_radius
- minor radius of the LCMS [m]</p></li>
<li><p>Elongation
- elongation of the LCMS [-]</p></li>
<li><p>Triangularity_upper
- upper triangularity of the LCMS [-]</p></li>
<li><p>Triangularity_lower
- lower triangularity of the LCMS [-]</p></li>
<li><p>Equilibrium code
- select one of available equilibrium solvers to check the
consistency between starting equilibrium and current profile; use
INTERPRETATIVE
if you trust your input data (in this case the check will be
ignorred).</p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_run_settings7.png" src="_images/ets_run_settings7.png" />
</div>
<p>Please note, that different equilibrium solvers might require slightly
different input. Thus it is a user responsibility to check that the
information inside input shot/run is enough to run selected equilibrium
solver.</p>
</div>
<div class="section" id="run-settings">
<h5>3.2.1.5.2. Run Settings<a class="headerlink" href="#run-settings" title="Permalink to this headline">¶</a></h5>
<p>There are several equilibrium solvers connected to the ETS. You can
select the one of them.Therefore please do:</p>
<ul class="simple">
<li><p>right click on the box CONVERGENCE LOOP</p></li>
<li><p>select <strong>Open actor</strong></p></li>
<li><p>right click on the box EQUILIBRIUM</p></li>
<li><p>select <strong>Configure actor</strong> to edit settings</p></li>
<li><p>choose your equilibrium solver</p></li>
<li><p><strong>Commit</strong></p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_convergence_loop_config.png" src="_images/ets_convergence_loop_config.png" />
</div>
<p><em>INTERPRETATIVE</em> means that the ETS will not update the equilibrium,
instead it will be using the initial equilibrium.</p>
<p>Please note, that it is better to select the same code as you used for
pre-iterrations. Because outputs of different equilibrium solver are not
necessary done with the same resolution. Therefore the routine saving
the information to the data base might brake due to uncompatible sizes
of some signals.</p>
<div class="figure align-center">
<img alt="_images/ets_equilibrium1.png" src="_images/ets_equilibrium1.png" />
</div>
</div>
</div>
<div class="section" id="transport">
<span id="ets-a-4-10b-transport"></span><h4>3.2.1.6. Transport<a class="headerlink" href="#transport" title="Permalink to this headline">¶</a></h4>
<p>The settings for TRANSPORT can be done inside the CONVERGENCE LOOP
composite actor. Therefore please do:</p>
<ul class="simple">
<li><p>right click on the box CONVERGENCE LOOP</p></li>
<li><p>select <strong>Open actor</strong></p></li>
<li><p>right click on the box TRANSPORT</p></li>
<li><p>select <strong>Configure actor</strong> to edit settings</p></li>
<li><p>choose your settings</p></li>
<li><p>press <strong>Commit</strong></p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_transport1.png" src="_images/ets_transport1.png" />
</div>
<div class="section" id="transport-models">
<h5>3.2.1.6.1. Transport models<a class="headerlink" href="#transport-models" title="Permalink to this headline">¶</a></h5>
<p>ETS constructs the total transport coefficients from the combination of
Anomalous transport (model choice), Neoclassical transport (model
choice), Database transport (transport coefficients be saved to the
input shot) and Background transport (Transport coefficients defined
through the GUI interface)</p>
<p>D_tot = D_DB*M_DB + D_AN*M_AN + D_NC*M_NC + D_BG*M_BG</p>
<p>You should choose from the list of evailable models in each cathegory or
switch it <strong>OFF</strong></p>
<p>Individual multipliers for all channels shall be specified on the lower
level through the code parameters of Transport Combiner</p>
<p>The list of available transport models can be found
<a class="reference external" href="https://www.eufus.eu/documentation/EU-IM/html/ets_status.html">here</a>.</p>
<div class="figure align-center">
<img alt="_images/ets_transport2.png" src="_images/ets_transport2.png" />
</div>
</div>
<div class="section" id="background-transport">
<h5>3.2.1.6.2. Background transport<a class="headerlink" href="#background-transport" title="Permalink to this headline">¶</a></h5>
<p>You can add the constant background level for each coefficient (ion and
impurity coefficients are expected to be the strings of [1:NION] and
[1:NIMP] elements respectively, separated by commas)</p>
<div class="figure align-center">
<img alt="_images/ets_transport3.png" src="_images/ets_transport3.png" />
</div>
</div>
<div class="section" id="edge-transport-barrier">
<h5>3.2.1.6.3. Edge transport barrier<a class="headerlink" href="#edge-transport-barrier" title="Permalink to this headline">¶</a></h5>
<p>In this section you can artificially supress the transport outside of
specified <em>RHO_TOR_NORM_ETB</em>. Total transport coefficients for all
transport channels (ne, ni, nz, Te, Ti,…) will be reduced to constant
values specified below (ion and impurity coefficients are expected to be
the strings [1:NION] and [1:NIMP] respectively)</p>
<div class="figure align-center">
<img alt="_images/ets_transport4.png" src="_images/ets_transport4.png" />
</div>
</div>
<div class="section" id="total-transport-coefficients">
<h5>3.2.1.6.4. Total transport coefficients<a class="headerlink" href="#total-transport-coefficients" title="Permalink to this headline">¶</a></h5>
<p>The fine tuning of of transport coefficients can be done through editing
the XML code parameters of the <strong>transport combiner</strong> actor:</p>
<ul class="simple">
<li><p>In Outline browse for transportcombiner</p></li>
<li><p>select <strong>Configure actor</strong></p></li>
<li><p>click <strong>Edit Code Parameters</strong></p></li>
<li><ul>
<li><p>If you select <strong>OFF</strong> contributions from all transport models to this channel will be
nullified;</p></li>
<li><p>If you select <strong>Multipliers_for_contributions_from</strong> the transport channel
will be activated, and the total transport coefficient will be
combined from active tranport models. You gust need to specify
multiplier against each channel;</p></li>
<li><p>For convective velocity there is an additional option
<strong>V_over_D_ratio_for_contributions_from</strong>.
With this option selected the combiner will ignore the
convective components provided by transport models. The convective
velocity will be determined from the diffusion coefficient by
applying fixed V/D ratio (
for inward pinch the values should be negative!
).</p></li>
</ul>
</li>
<li><p><strong>Save and exit</strong></p></li>
<li><p><strong>Commit</strong></p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_transport_combiner.png" src="_images/ets_transport_combiner.png" />
</div>
</div>
</div>
<div class="section" id="mhd">
<span id="ets-a-4-10b-mhd"></span><h4>3.2.1.7. MHD<a class="headerlink" href="#mhd" title="Permalink to this headline">¶</a></h4>
<p>The settings for MHD type of events can be done inside the CONVERGENCE
LOOP composite actor. Therefore please do:</p>
<ul class="simple">
<li><p>right click on the box CONVERGENCE LOOP</p></li>
<li><p>select <strong>Open actor</strong></p></li>
<li><p>right click on the box MHD</p></li>
<li><p>select <strong>Configure actor</strong> to edit settings</p></li>
<li><p>choose your settings</p></li>
<li><p><strong>Commit</strong></p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_mhd.png" src="_images/ets_mhd.png" />
</div>
<p>At the moment ETS allows only for NTM to be activated. The sawtooth
module is expected to be deployed before EU-IM Code Camp in Slovenia.</p>
<p>User can ajust the following NTM settings:</p>
<ul class="simple">
<li><p>NTM – <strong>ON</strong> means that ETS will add the NTM driven transport to the total
transport coefficient; <strong>OFF</strong> -ignored</p></li>
<li><p>NTMTransportMultiplier – the transport contrinution from NTM will be multiplied with this
value</p></li>
<li><p>Onset_NTM_time - activation time for the NTM mode</p></li>
<li><p>Onset_NTM_width - starting width of the mode</p></li>
<li><p>m_NTM_poloidal_number</p></li>
<li><p>n_NTM_toroidal_number</p></li>
<li><p>NTM_phase</p></li>
<li><p>NTM_frequency</p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_mhd2.png" src="_images/ets_mhd2.png" />
</div>
</div>
<div class="section" id="sources-and-impurity">
<span id="ets-a-4-10b-sources"></span><h4>3.2.1.8. Sources and impurity<a class="headerlink" href="#sources-and-impurity" title="Permalink to this headline">¶</a></h4>
<p>The settings for SOURCES AND IMPURITY can be done inside the CONVERGENCE
LOOP composite actor. Therefore please do:</p>
<ul class="simple">
<li><p>right click on the box CONVERGENCE LOOP</p></li>
<li><p>select <strong>Open actor</strong></p></li>
<li><p>right click on the box SOURCES AND IMPURITY</p></li>
<li><p>select <strong>Configure actor</strong> to edit settings</p></li>
<li><p>choose your settings</p></li>
<li><p><strong>Commit</strong></p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_source1.png" src="_images/ets_source1.png" />
</div>
<div class="section" id="analytical-impurity-sources">
<h5>3.2.1.8.1. Analytical &amp; Impurity sources<a class="headerlink" href="#analytical-impurity-sources" title="Permalink to this headline">¶</a></h5>
<p>There is a number of sources developed by IMP3 project, which are actors
or internal routines of the transport solver. You can activate them by
selecting <strong>ON / OFF</strong> in front of corresponding source:</p>
<ul class="simple">
<li><p>Database Sources – <strong>ON</strong> - ETS will pick up the evolution of source profiles saved to your
input shot/run; <strong>OFF</strong> -ignored</p></li>
<li><p>Ohmic Heating – <strong>ON</strong> - ETS will compute Ohmic heating internaly; <strong>OFF</strong> -ignored</p></li>
<li><p>Gaussian Sources – <strong>ON</strong> - ETS will add sources from the Gaussian source actor (you can
configure heat and particle deposition profiles by editing the code
parameters of the actor); <strong>OFF</strong> -ignored</p></li>
<li><p>Neutral Sources – <strong>ON</strong> - Fluid neutrals will be solved according to the boundary conditions
specified on ¨Before_time_evolution¨ composite actor interface; <strong>OFF</strong> -ignored</p></li>
<li><p>Switch_IMPURITY – <strong>ON</strong> - Impurity density and radiative sources will be computed;
<strong>OFF</strong> -ignored; <strong>INTERPRETATIVE</strong> – profiles of impurity density will be read from input shot/run</p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_sources2.png" src="_images/ets_sources2.png" />
</div>
</div>
<div class="section" id="hcd-sources">
<h5>3.2.1.8.2. HCD sources<a class="headerlink" href="#hcd-sources" title="Permalink to this headline">¶</a></h5>
<p>There is a number of sources developed by HCD project, that are
incorporated by the ETS workflow.</p>
<p>For the HCD sources please activate the type of heating source, by
ticking the box in front of it, and select the code to simulate it.</p>
<div class="figure align-center">
<img alt="_images/ets_sources3.png" src="_images/ets_sources3.png" />
</div>
<p>You also need to configure initial IMP5HCD settings. Therefore please:</p>
<ul class="simple">
<li><p>right click on the box BEFORE THE TIME EVOLUTION</p></li>
<li><p>select <strong>Open Actor</strong></p></li>
<li><p>right click on the box SETTINGS FOR HEATING AND CURRENT DRIVE</p></li>
<li><p>select <strong>Configure actor</strong></p></li>
<li><p>edit the stettings</p></li>
<li><p><strong>Commit</strong></p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_sources4.png" src="_images/ets_sources4.png" />
</div>
<p>The detailed information on initial IMP5HCD settings can be found
<a class="reference external" href="https://www.eufus.eu/documentation/EU-IM/html/imp5_imp5hcd.html">here</a>.
Please note that settings for NBI are done independent for each PINI.
Therefore, for NBI settings, please insert the values separated by
commas. The number of the element in the array corresponds to the number
of activated PINI. Maximum accepted number of PINIs = 16.</p>
<div class="figure align-center">
<img alt="_images/ets_sources5.png" src="_images/ets_sources5.png" />
</div>
</div>
<div class="section" id="power-control">
<h5>3.2.1.8.3. Power control<a class="headerlink" href="#power-control" title="Permalink to this headline">¶</a></h5>
<p>You also can activate the power control for the IMP5HCD sources.</p>
<div class="figure align-center">
<img alt="_images/ets_sources6.png" src="_images/ets_sources6.png" />
</div>
<p>If the POWER_CONTROL is not <strong>OFF</strong>, there are two modes of
operation: <strong>specific</strong> and <strong>frequency</strong></p>
<p>For <strong>specific</strong> you should specify the time sequence separated by commas
and the corresponding power sequence (where first power level
corresponds to the first time, second to second and etc.). Linear
interpolation will be done between the sequence points. For example: if
you give the power <strong>sequence</strong> = 2e6,4e6,1e6 and <strong>times</strong> = 0.0, 0.7, 1.5 (s) the delivered power would be:</p>
<div class="figure align-center">
<img alt="_images/ets_sources7.png" src="_images/ets_sources7.png" />
</div>
<p>For <strong>frequency</strong> you should specify the power levels sequence separated
by commas, start and end time of the power control and the frequency of
switching between these levels. For example: if you give the power
<strong>sequence</strong> = 2e6,4e6,1e6 and <strong>frequency</strong> = 10 (Hz) <strong>tstart</strong> = 0.0 (s)
<strong>tend</strong> = 1.5 (s) the delivered power would be:</p>
<div class="figure align-center">
<img alt="_images/ets_sources8.png" src="_images/ets_sources8.png" />
</div>
</div>
<div class="section" id="total-power">
<h5>3.2.1.8.4. Total power<a class="headerlink" href="#total-power" title="Permalink to this headline">¶</a></h5>
<p>Profiles of the total source for each channel are obtained from the the
individual contributions (Data Base, Gaussian, Neutrals, Impurity and
HCD) as a summ of all activated sources multiplied with coefficients
specified on the interface of the composite actor.</p>
<p>S_tot = S_DS*DSM + S_GS*GSM + S_Neu*NeuSM + S_IMP*IMPSM + S_HCD*HCDSM</p>
<p>The fine tuning of of sources can be done through editing the XML code
parameters of the source combiner actor:</p>
<ul class="simple">
<li><p>In the Outline browse for source combiner</p></li>
<li><p>select <strong>Configure actor</strong></p></li>
<li><p>click <strong>Edit Code Parameters</strong></p></li>
<li><p>If you like the sources to the particular equation being activated -
select <strong>from_input_CPOs</strong>, and then, put the multipliers against each
contribution; if you select <strong>OFF</strong> contributions from all sources to
this channel will be nullified.</p></li>
<li><p>save and exit</p></li>
<li><p><strong>Commit</strong></p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_sources9.png" src="_images/ets_sources9.png" />
</div>
</div>
</div>
<div class="section" id="instantaneous-events-actuators">
<span id="ets-a-4-10b-inst-events"></span><h4>3.2.1.9. Instantaneous events &amp; Actuators<a class="headerlink" href="#instantaneous-events-actuators" title="Permalink to this headline">¶</a></h4>
<p>At the moment, user can swith <strong>ON</strong> and <strong>OFF</strong> two types of events: PELLET
and SAWTOOTH</p>
<div class="section" id="pellet">
<h5>3.2.1.9.1. Pellet<a class="headerlink" href="#pellet" title="Permalink to this headline">¶</a></h5>
<p>At the top level of the workflow you can configure times for pellet
injection</p>
<ul class="simple">
<li><p>right click on the box INSTANTANEOUS EVENTS &amp; ACTUATORS</p></li>
<li><p>select <strong>Configure actor</strong> to edit settings</p></li>
<li><p>Select Pellet_injection equal <strong>ON</strong> if you like to use pellet in your
simulation</p></li>
<li><p>Select mode of operation:</p>
<ul>
<li><p>Times_for_pellets equals <strong>specific</strong> – pellets will be shut at exact times specified in array times_pellet</p></li>
<li><p>Times_for_pellets equals <strong>frequency</strong> – pellets will be shut from
tstart_pellet until tend_pellet with a frequency_pellet</p></li>
</ul>
</li>
<li><p><strong>Commit</strong></p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_instantaneous_events1.png" src="_images/ets_instantaneous_events1.png" />
</div>
<p>Parameters of individual pellet need to be configured through the
code_parameters of the PELLET actor. To access it go to <strong>Outline</strong> on the
right upper corner and open the following:</p>
<div class="figure align-center">
<img alt="_images/ets_instantaneous_events2.png" src="_images/ets_instantaneous_events2.png" />
</div>
<ul class="simple">
<li><p>right click on the actor PELLET</p></li>
<li><p>select <strong>Configure actor</strong></p></li>
<li><p>click <strong>Edit Code Parameters</strong></p></li>
<li><p>edit parameters and click <strong>save and exit</strong></p></li>
<li><p><strong>Commit</strong></p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_instantaneous_events3.png" src="_images/ets_instantaneous_events3.png" />
</div>
<p>amn – atomic mass number: array of elements separated by space
(1:nelements) [-]</p>
<p>zn – nuclear charge: array of elements separated by space (1:nelements)
[-]</p>
<p>fraction – fraction of each element in the pellet, based on the number
of atoms: array of elements separated by space (1:nelements) [-]</p>
<p>rpell – radius of the pellet [m]</p>
<p>vpell – velocity of the pellet [m/s]</p>
<p>rcloud – radius of the pellet cloud [m], radial extension of the cloud =
2*rp0</p>
<p>lcloud – length of the pellet cloud along the field line [m]</p>
<p>Tcloud – temperature of the pellet cloud [eV]</p>
<p>Pellet path is specified by two points, for which R and Z coordinated
should be specified</p>
<p>R – R coordinates of the pivot and second points of the pellet path,
separated by space [m]</p>
<p>Z – Z coordinates of the pivot and second points of the pellet path,
separated by space [m]</p>
<p>Control switches allow to activate:</p>
<ul class="simple">
<li><p>drifts - YES - will activate radial displacement of deposition profile, same
for all path points</p></li>
<li><p>cooling - YES - will activate cooling of the other side of the plasma due to
parallel heat transport (essential for large pellets, which might
cross the same flux surface twice)</p></li>
<li><p>JINTRAC - YES - will provide temperature reduction consistent with the model
used in JETTO</p></li>
</ul>
</div>
<div class="section" id="sawtooth">
<h5>3.2.1.9.2. Sawtooth<a class="headerlink" href="#sawtooth" title="Permalink to this headline">¶</a></h5>
<p>At the top level of the workflow you can switch ON/OFF possible MHD
events</p>
<ul class="simple">
<li><p>right click on the box INSTANTANEOUS EVENTS &amp; ACTUATORS</p></li>
<li><p>select <strong>Configure actor</strong> to edit settings</p></li>
<li><p>Select SAWTOOTH <strong>ON</strong> if you like to use them in your simulation</p></li>
<li><p><strong>Commit</strong></p></li>
</ul>
</div>
<div class="section" id="actuators">
<h5>3.2.1.9.3. Actuators<a class="headerlink" href="#actuators" title="Permalink to this headline">¶</a></h5>
<p>At the top level of the workflow you can switch ON/OFF actuator for
runaways</p>
<ul class="simple">
<li><p>right click on the box INSTANTANEOUS EVENTS &amp; ACTUATORS</p></li>
<li><p>select <strong>Configure actor</strong> to edit settings</p></li>
<li><p>Select actuator_runaways <strong>ON</strong> if you like to use them in your simulation</p></li>
<li><p><strong>Commit</strong></p></li>
</ul>
</div>
</div>
<div class="section" id="scenario-output">
<span id="ets-a-4-10b-scenario"></span><h4>3.2.1.10. Scenario output<a class="headerlink" href="#scenario-output" title="Permalink to this headline">¶</a></h4>
<p>You can summarize the ETS run by activating the output to SCENARIO CPO
(as post-processing of the run).</p>
<p>To activate the SCENARIO output:</p>
<ul class="simple">
<li><p>right click on the box AFTER THE TIME EVOLUTION</p></li>
<li><p>select <strong>Configure actor</strong></p></li>
<li><p>select Generate_SCENARIO_output_from_ETS_run equal <strong>YES</strong></p></li>
<li><p><strong>Commit</strong></p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_scenario.png" src="_images/ets_scenario.png" />
</div>
</div>
<div class="section" id="visualization">
<span id="ets-a-4-10b-visualization"></span><h4>3.2.1.11. Visualization<a class="headerlink" href="#visualization" title="Permalink to this headline">¶</a></h4>
<p>There is a number tools visualizing the ETS run.</p>
</div>
<div class="section" id="multiple-tab-display">
<h4>3.2.1.12. Multiple Tab Display<a class="headerlink" href="#multiple-tab-display" title="Permalink to this headline">¶</a></h4>
<p>The display appeares automaticaly when the ETS workflow is launched. It
displays diagnostic text messages from the workflow on following topics:</p>
<ul class="simple">
<li><p>Input data statement</p></li>
<li><p>Iterations to check the initial convergence between EQUILIBRIUM and
CURRENT</p></li>
<li><p>Time evolution</p></li>
<li><p>Convergence of iteratinos within the time step</p></li>
<li><p>IMP5HCD settings</p></li>
<li><p>Power used by IMP5HCD actors durung the run</p></li>
</ul>
<p>Also the error messages from execution of the workflow will be displayed
here.</p>
<div class="figure align-center">
<img alt="_images/ets_visual1.png" src="_images/ets_visual1.png" />
</div>
</div>
<div class="section" id="python-visualization-display">
<h4>3.2.1.13. Python Visualization Display<a class="headerlink" href="#python-visualization-display" title="Permalink to this headline">¶</a></h4>
<p>Please note, if you plan to use python based vizualization <strong>nomatlab</strong>
argument is essential by the opening of the workflow.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;</span>kepler.sh nomatlab workflow_path/workflow_name.xml
</pre></div>
</div>
<p>You can activate the graphical visualization of your run evolution:</p>
<ul class="simple">
<li><p>right click on the box Check Time &amp; Save Slice</p></li>
<li><p>select <strong>Configure actor</strong></p></li>
<li><p>select visualisation <strong>YES</strong> or <strong>NO</strong></p></li>
<li><p><strong>Commit</strong></p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_visual2.png" src="_images/ets_visual2.png" />
</div>
<p>Then evolution of main discharge parameters will be shown in this
window:</p>
<div class="figure align-center">
<img alt="_images/ets_visual3.png" src="_images/ets_visual3.png" />
</div>
</div>
</div>
<div class="section" id="list-of-actors">
<span id="ets-a-4-10b-list-actors"></span><h3>3.2.2. List of Actors<a class="headerlink" href="#list-of-actors" title="Permalink to this headline">¶</a></h3>
<p>UNDER DEVELOPMENT</p>
<div class="section" id="equilibrium-actors">
<span id="ets-a-4-10b-list-actors-equilibrium"></span><h4>3.2.2.1. Equilibrium actors<a class="headerlink" href="#equilibrium-actors" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-center">
<colgroup>
<col style="width: 17%" />
<col style="width: 24%" />
<col style="width: 24%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Code name</p></th>
<th class="head"><p>Code Category</p></th>
<th class="head"><p>Contact persons</p></th>
<th class="head"><p>Short description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>chease</p></td>
<td><div class="line-block">
<div class="line">Grad-Shafranov</div>
<div class="line">solver</div>
</div>
</td>
<td><p>Olivier Sauter</p></td>
<td><div class="line-block">
<div class="line">Chease is a fixed</div>
<div class="line">boundary Grad-Shafranov</div>
<div class="line">solver based on cubic</div>
<div class="line">hermitian finite</div>
<div class="line">elements see</div>
<div class="line">H. Lütjens, A.</div>
<div class="line">Bondeson, O. Sauter,</div>
<div class="line">Computer Physics</div>
<div class="line">Communications 97</div>
<div class="line">(1996) 219-260</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>emeq</p></td>
<td><p>/</p></td>
<td><p>/</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>spider</p></td>
<td><p>/</p></td>
<td><p>/</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="core-transport-actors">
<span id="ets-a-4-10b-list-actors-coretransport"></span><h4>3.2.2.2. Core transport actors<a class="headerlink" href="#core-transport-actors" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-center">
<colgroup>
<col style="width: 24%" />
<col style="width: 23%" />
<col style="width: 21%" />
<col style="width: 32%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Code name</p></th>
<th class="head"><p>Code Category</p></th>
<th class="head"><p>Contact persons</p></th>
<th class="head"><p>Short description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ETS</p></td>
<td><p>Transport solver</p></td>
<td><p>Denis Kalupin</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>BohmGB</p></td>
<td><div class="line-block">
<div class="line">Bohm/gyro-Bohm</div>
<div class="line">transport</div>
<div class="line">coefficients</div>
</div>
</td>
<td><p>/</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>TCI/Weiland</p></td>
<td><div class="line-block">
<div class="line">Transport</div>
<div class="line">coefficient from</div>
<div class="line">coefficients</div>
</div>
</td>
<td><p>Pär Strand</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>TCI/GLF23</p></td>
<td><div class="line-block">
<div class="line">Transport</div>
<div class="line">coefficient from</div>
<div class="line">drift wave</div>
<div class="line">turbulence</div>
</div>
</td>
<td><p>/</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>TCI/RITM</p></td>
<td><div class="line-block">
<div class="line">Transport</div>
<div class="line">coefficient from</div>
<div class="line">drift wave</div>
<div class="line">turbulence</div>
</div>
</td>
<td><p>/</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">TCI/MMM</div>
<div class="line">(not yet</div>
<div class="line">in ETS)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Transport</div>
<div class="line">coefficient from</div>
<div class="line">drift wave</div>
<div class="line">turbulence</div>
</div>
</td>
<td><p>/</p></td>
<td></td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">TCI/EDWM</div>
<div class="line">(not yet</div>
<div class="line">in ETS)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Transport</div>
<div class="line">coefficient from</div>
<div class="line">drift wave</div>
<div class="line">turbulence</div>
</div>
</td>
<td><p>/</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">nclass</div>
<div class="line">(not yet</div>
<div class="line">in ETS)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Neoclassical</div>
<div class="line">transport</div>
<div class="line">coefficients</div>
</div>
</td>
<td><p>Pär Strand</p></td>
<td></td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">neos</div>
<div class="line">(not yet</div>
<div class="line">in ETS)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Neoclassical</div>
<div class="line">transport</div>
<div class="line">coefficients</div>
</div>
</td>
<td><p>Olivier Sauter</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>neowesz</p></td>
<td><div class="line-block">
<div class="line">Neoclassical</div>
<div class="line">transport</div>
<div class="line">coefficients</div>
</div>
</td>
<td><p>Bruce Scott</p></td>
<td><div class="line-block">
<div class="line">Neoclassical transport</div>
<div class="line">coefficients based on</div>
<div class="line">the expression in John</div>
<div class="line">Wesson’s book Tokamaks.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>neoartz</p></td>
<td><div class="line-block">
<div class="line">Neoclassical</div>
<div class="line">transport</div>
<div class="line">coefficients</div>
</div>
</td>
<td><p>Bruce Scott</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>spitzer</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>ETBtransport</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>coronal</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>synchrotronsources</p></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="edge-transport-actors">
<span id="ets-a-4-10b-list-actors-edge"></span><h4>3.2.2.3. Edge transport actors<a class="headerlink" href="#edge-transport-actors" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="heating-and-current-drive-actors">
<span id="ets-a-4-10b-list-actors-hcd"></span><h4>3.2.2.4. Heating and current drive actors<a class="headerlink" href="#heating-and-current-drive-actors" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-center">
<colgroup>
<col style="width: 16%" />
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 48%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Code name</p></th>
<th class="head"><p>Code Category</p></th>
<th class="head"><p>Contact persons</p></th>
<th class="head"><p>Short description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>gray</p></td>
<td><p>EC/waves</p></td>
<td><p>Lorenzo Figini</p></td>
<td><div class="line-block">
<div class="line">GRAY is a quasi-optical ray-tracing code</div>
<div class="line">for electron cyclotron heating &amp; current</div>
<div class="line">drive calculations in tokamaks.</div>
<div class="line">Code-parameter documentation can be found</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>travis</p></td>
<td><p>EC/waves</p></td>
<td><div class="line-block">
<div class="line">Nikolai</div>
<div class="line">Marushchenko</div>
<div class="line">and</div>
<div class="line">Lorenzo</div>
<div class="line">Figini</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Travis is a ray-tracing code for electron</div>
<div class="line">cyclotron heating &amp; current drive</div>
<div class="line">calculations in tokamaks.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>Torray-FOM</p></td>
<td><p>EC/waves</p></td>
<td><p>Egbert Westerhof</p></td>
<td><div class="line-block">
<div class="line">Torray-FOM is a ray-tracing code for</div>
<div class="line">electron cyclotron heating &amp; current</div>
<div class="line">drive calculations in tokamaks.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>bbnbi</p></td>
<td><p>NBI/source</p></td>
<td><p>Otto Asunta</p></td>
<td><div class="line-block">
<div class="line">Calculate the deposition rates of neutrals</div>
<div class="line">beam particles, i.e. the input source for</div>
<div class="line">Fokker-Planck solvers (not the heating and</div>
<div class="line">current drive). Note that the number of</div>
<div class="line">markers generated by BBNBI is described by</div>
<div class="line">the kepler variable number_nbi_markers_in.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>nemo</p></td>
<td><p>NBI/source</p></td>
<td><div class="line-block">
<div class="line">Mireille</div>
<div class="line">Schneider</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Calculate the deposition rates of neutrals</div>
<div class="line">beam particles, i.e. the input source for</div>
<div class="line">Fokker-Planck solvers (not the heating and</div>
<div class="line">current drive). Code-parameter</div>
<div class="line">documentation can be found</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>nuclearsim</p></td>
<td><p>nuclear/source</p></td>
<td><p>Thomas Johnson</p></td>
<td><div class="line-block">
<div class="line">Simple code for nuclear sources from</div>
<div class="line">thermal/thermal reactions. Code-parameter</div>
<div class="line">documentation can be found</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>nbisim</p></td>
<td><div class="line-block">
<div class="line">NBI, alphas/</div>
<div class="line">Fokker-Planck</div>
</div>
</td>
<td><p>Thomas Johnson</p></td>
<td><div class="line-block">
<div class="line">Simple Fokker-Planck code calculating the</div>
<div class="line">collisional ion and electron heating from</div>
<div class="line">a particle source, either NBI or nuclear.</div>
<div class="line">Code-parameter documentation can be found</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>risk</p></td>
<td><div class="line-block">
<div class="line">NBI Fokker-</div>
<div class="line">Planck</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Mireille</div>
<div class="line">Schneider</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Bounce averaged steady-state Fokker-Planck</div>
<div class="line">solver calculating the collisional ion and</div>
<div class="line">electron heating from a particle source</div>
<div class="line">and the NBI current drive. Code-parameter</div>
<div class="line">documentation can be found</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>spot</p></td>
<td><div class="line-block">
<div class="line">NBI, alphas</div>
<div class="line">and</div>
<div class="line">ICRF Fokker</div>
<div class="line">-Planck</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Mireille</div>
<div class="line">Schneider</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Monte Carlo solver for the Fokker-Planck</div>
<div class="line">equation. Traces guiding centre orbits in</div>
<div class="line">a steady state magnetic equilibrium under</div>
<div class="line">the influence of Coloumb collisions and</div>
<div class="line">interactions with ICRF waves (through the</div>
<div class="line">RFOF library). The code can also be used</div>
<div class="line">for NBI and alpha particle modelling as it</div>
<div class="line">can handle source terms from the</div>
<div class="line">distsource CPO.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>ascot4serial</p></td>
<td><div class="line-block">
<div class="line">NBI, alphas,</div>
<div class="line">ICRF/</div>
<div class="line">Fokker-Planck</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Otto</div>
<div class="line">Asunta/</div>
<div class="line">Seppo</div>
<div class="line">Sipila</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Monte Carlo Fokker-Planck solver</div>
<div class="line">calculating the collisional ion and</div>
<div class="line">electron heating from a particle source</div>
<div class="line">and the NBI current drive.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>ascot4parallel</p></td>
<td><div class="line-block">
<div class="line">NBI, alphas,</div>
<div class="line">ICRF/</div>
<div class="line">Fokker-Planck</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Otto</div>
<div class="line">Asunta/</div>
<div class="line">Seppo</div>
<div class="line">Sipila</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Monte Carlo Fokker-Planck solver</div>
<div class="line">calculating the collisional ion and</div>
<div class="line">electron heating from a particle source</div>
<div class="line">and the NBI current drive.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>Lion</p></td>
<td><p>IC / waves</p></td>
<td><div class="line-block">
<div class="line">Olivier Sauter</div>
<div class="line">and</div>
<div class="line">Laurent</div>
<div class="line">Villard</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Global ICRF wave solver. Code-parameter</div>
<div class="line">documentation can be found</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>Cyrano</p></td>
<td><p>IC / waves</p></td>
<td><div class="line-block">
<div class="line">Ernesto Lerche</div>
<div class="line">and</div>
<div class="line">Dirk</div>
<div class="line">Van Eester</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Global ICRF wave solver. Code-parameter</div>
<div class="line">documentation can be found</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">Eve</div>
<div class="line">(not yet in</div>
<div class="line">ETS)</div>
</div>
</td>
<td><p>IC / waves</p></td>
<td><p>Remi Dumont</p></td>
<td><div class="line-block">
<div class="line">Global ICRF wave solver</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>StixReDist</p></td>
<td><p>IC / waves</p></td>
<td><div class="line-block">
<div class="line">Dirk</div>
<div class="line">Van Eester</div>
<div class="line">and</div>
<div class="line">Ernesto</div>
<div class="line">Lerche</div>
</div>
</td>
<td><div class="line-block">
<div class="line">1d Fokker-Planck solver for ICRF heating.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>ICdep</p></td>
<td><p>IC / waves</p></td>
<td><p>Thomas Johnson</p></td>
<td><div class="line-block">
<div class="line">Generates Waves-cpo with an IC wave field</div>
<div class="line">with Gaussian deposition profiles</div>
<div class="line">described by a combination of antenna-cpo</div>
<div class="line">input and through code parameters input.</div>
<div class="line">Code-parameter documentation can be found</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>ICcoup</p></td>
<td><p>IC / coupling</p></td>
<td><p>Thomas Johnson</p></td>
<td><div class="line-block">
<div class="line">Simple model for the coupling waves from</div>
<div class="line">ion cyclotron antennas to the plasma.</div>
<div class="line">Code-parameter documentation can be found</div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="events-actors">
<span id="ets-a-4-10b-list-actors-events"></span><h4>3.2.2.5. Events actors<a class="headerlink" href="#events-actors" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-center">
<colgroup>
<col style="width: 19%" />
<col style="width: 18%" />
<col style="width: 17%" />
<col style="width: 46%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Code name</p></th>
<th class="head"><p>Code Category</p></th>
<th class="head"><p>Contact persons</p></th>
<th class="head"><p>Short description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>pelletactor</p></td>
<td><p>pellet</p></td>
<td><p>Denis Kalupin</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>pellettrigger</p></td>
<td><p>pellet</p></td>
<td><p>Denis Kalupin</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>sawcrash_slice</p></td>
<td><p>sawteeth</p></td>
<td><p>Olivier Sauter</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>sawcrit</p></td>
<td><p>sawteeth</p></td>
<td><p>Olivier Sauter</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>runaway_indicator</p></td>
<td><p>runaway</p></td>
<td><p>Roland Lohneroch
Gergo Pokol</p></td>
<td><div class="line-block">
<div class="line">Indicating the presence of runaway</div>
<div class="line">electrons:</div>
<div class="line">1) Indicate, whether electric field is</div>
<div class="line">below the critical level, thus runaway</div>
<div class="line">generation is impossible.</div>
<div class="line">2) Indicate, whether runaway electron</div>
<div class="line">growth rate exceeds a preset limit. This</div>
<div class="line">calculation takes only the Dreicer runaway</div>
<div class="line">generation method in account and assumes a</div>
<div class="line">velocity distribution close to Maxwellian,</div>
<div class="line">therefore this result should be considered</div>
<div class="line">with caution. The growth rate limit can be</div>
<div class="line">set via an input of the actor. Limit value</div>
<div class="line">is set to \( 10^{12} \) particle per
second by default.</div>
<div class="line">(This growth rate generates a runaway</div>
<div class="line">current of approximately 1kA considering a</div>
<div class="line">10 seconds long discharge.)</div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="non-physics-actors">
<h4>3.2.2.6. Non-physics actors<a class="headerlink" href="#non-physics-actors" title="Permalink to this headline">¶</a></h4>
<p>The ETS uses the following list of non-physics actors: addECant,
addICant, backgroundtransport, calculateRHO, changeocc, changepsi,
changeradii, checkconvergence, controlAMIX, coredelta2coreprof,
correctcurrent, deltacombiner, emptydistribution, emptydistsource,
emptywaves, eqinput, etsstart, fillcoreimpur, fillcoreneutrals,
fillcoreprof, fillcoresource, fillcoretransp, fillequilibrium,
fillneoclassic, filltoroidfield, gausiansources, geomfromcpo,
hcd2coresource, ignoredelta, ignoreimpurity, ignoreneoclassic,
ignoreneutrals, ignorepellet, ignoresources, ignoretransport, IMP4dv,
IMP4imp, importimptransport, itmimpurity, itmneutrals,
merger4distribution, merger4distsource, merger4waves, nbifiller,
neoclassic2coresource, neoclassic2coretransp, parabolicprof,
plasmacomposition, PowerFromArray, PowerModulation, profilesdatabase,
readjustprof, sawupdate_slice, scaleprof, sourcecombiner,
sourcedatabase, transportcombiner, transportdatabase, wallFiller and
waves2sources.</p>
</div>
</div>
</div>
<div class="section" id="ets-4-10a">
<span id="ets-a-4-10a"></span><h2>3.3. ETS 4.10a<a class="headerlink" href="#ets-4-10a" title="Permalink to this headline">¶</a></h2>
<p><strong>ETS workflow in KEPLER</strong>:</p>
<ul class="simple">
<li><p>uses as actors and composite actors from other IMPs, thus for the
most recent versions of them please check with relevant project</p></li>
<li><p>complex, but clearly structured workflow, which offers user friendly
interface for configuring the simulation</p></li>
<li><dl class="simple">
<dt>allows for easy modifications (connecting new modules, or reconnecting</dt><dd><p>the parts of the workflow) through the easy graphical interface</p>
</dd>
</dl>
</li>
<li><p>provides users with all updates through the version control system</p></li>
<li><p>still actively developing tool</p></li>
</ul>
<p>The list and status of available physics models for the ETS_A can be
found
<a class="reference external" href="https://www.eufus.eu/documentation/EU-IM/html/ets_status.html">here</a>.</p>
<p><strong>Contact person:</strong> Denis Kalupin</p>
<div class="figure align-center">
<img alt="_images/ets_top_a.png" src="_images/ets_top_a.png" />
</div>
<div class="section" id="obtaining-the-ets">
<h3>3.3.1. Obtaining the ETS<a class="headerlink" href="#obtaining-the-ets" title="Permalink to this headline">¶</a></h3>
<p>Copy the ETS workflow to your space:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;</span>svn co https://gforge6.eufus.eu/svn/keplerworkflows/trunk/4.10a/imp3/ets <span class="nv">$EU</span>-IMSCRATCH/ETS_WORKFLOWS
</pre></div>
</div>
<p>Compile ETS actors:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;</span><span class="nb">cd</span> <span class="nv">$EU</span>-IMSCRATCH/ETS_WORKFLOWS
<span class="gp">&gt;</span>make import_ets
</pre></div>
</div>
</div>
<div class="section" id="updating-the-ets">
<h3>3.3.2. Updating the ETS<a class="headerlink" href="#updating-the-ets" title="Permalink to this headline">¶</a></h3>
<p>If you have already a copy of the ETS you do not need to check it out
again!!!</p>
<p>If you like to update everything (WORKFLOW + ACTORS + VISUALIZATION +
INPUT DATA)</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;</span><span class="nb">cd</span> <span class="nv">$EU</span>-IMSCRATCH/ETS_WORKFLOWS
<span class="gp">&gt;</span>svn update
<span class="gp">&gt;</span>make import_ets
</pre></div>
</div>
<p>To update ETS actors go inside your ETS_ACTORS:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;</span><span class="nb">cd</span> <span class="nv">$EU</span>-IMSCRATCH/ETS_WORKFLOWS
<span class="gp">&gt;</span>svn update
<span class="gp">&gt;</span>make import_actors
</pre></div>
</div>
<p>To update the workflow go inside your ETS_WORKFLOWS:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;</span><span class="nb">cd</span> <span class="nv">$EU</span>-IMSCRATCH/ETS_WORKFLOWS
<span class="gp">&gt;</span>svn update
</pre></div>
</div>
<p>To update visualization scripts go inside your $KEPLER/kplots:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;</span>svn update
</pre></div>
</div>
<p>This is ALL you need to do for updates!</p>
</div>
<div class="section" id="executing-the-ets">
<h3>3.3.3. Executing the ETS<a class="headerlink" href="#executing-the-ets" title="Permalink to this headline">¶</a></h3>
<div class="figure align-center">
<img alt="_images/ets_start_a.png" src="_images/ets_start_a.png" />
</div>
<p>Open ETS workflow in Kepler:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;</span>kepler.sh <span class="nv">$EU</span>-IMSCRATCH/ETS_WORKFLOWS/ETS_WORKFLOW.xml
</pre></div>
</div>
<p>on the top of the workflow, change the parameter “user” to your user_ID.</p>
<p>You can run the workflow!!!</p>
</div>
<div class="section" id="ets-a-4-10a-configuring">
<span id="id2"></span><h3>3.3.4. Configuring the ETS run<a class="headerlink" href="#ets-a-4-10a-configuring" title="Permalink to this headline">¶</a></h3>
<div class="section" id="ets-a-4-10a-workflow-parameters">
<span id="id3"></span><h4>3.3.4.1. Workflow Parameters<a class="headerlink" href="#ets-a-4-10a-workflow-parameters" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id4">
<h5>3.3.4.1.1. General Parameters<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>USER - your userid</p></li>
<li><p>MACHINE - machine name (database name) for which comutations are done</p></li>
<li><p>SHOT_IN - input shot number</p></li>
<li><p>RUN_IN - input run number</p></li>
<li><p>SHOT_OUT - output shot number</p></li>
<li><p>RUN_OUT - output run number</p></li>
<li><p>NUMERICAL_SOLVER - choice of the numerics solving transport equations
(RECOMENDED SELECTION: 3 or 4)</p></li>
</ul>
</div>
<div class="section" id="id5">
<h5>3.3.4.1.2. Space resolution<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>NRHO - number of radial points for transport equations</p></li>
<li><p>NPSI - number of points for equilibrium 1-D arrays</p></li>
<li><p>NEQ_DIM1 - number of points for equilibrium 2-D arrays, first index</p></li>
<li><p>NEQ_DIM2 - number of points for equilibrium 2-D arrays, second index</p></li>
<li><p>NEQ_MAX_NPOINTS - maximum number of points for equilibrium boundary</p></li>
</ul>
</div>
<div class="section" id="id6">
<h5>3.3.4.1.3. Time resolution<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h5>
<p>Start and End time</p>
<ul class="simple">
<li><p>TBEGIN - Computations start time</p></li>
<li><p>TEND - Computattions end time</p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_config1_a.png" src="_images/ets_config1_a.png" />
</div>
<p>Time spep</p>
<ul class="simple">
<li><p>right click on the box ‘BEFORE THE TIME EVOLUTION’</p></li>
<li><p>select ‘Configure actor’</p></li>
<li><p>TAU:specify value of the time step in [s]</p></li>
<li><p>TAU_OUT: specify value of the output time interval in [s]</p></li>
<li><p>Commit</p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_run_settings1_a.png" src="_images/ets_run_settings1_a.png" />
</div>
</div>
</div>
<div class="section" id="plasma-impurity-and-neutrals-composition">
<span id="ets-a-4-10a-composition"></span><h4>3.3.4.2. Plasma, Impurity and Neutrals Composition<a class="headerlink" href="#plasma-impurity-and-neutrals-composition" title="Permalink to this headline">¶</a></h4>
<p>Before starting the run you need to define types of main and impurity
ions and types of neutrals to be included in simulations.</p>
<p>To set up the composition:</p>
<ul class="simple">
<li><p>right click on the box ‘BEFORE THE TIME EVOLUTION’</p></li>
<li><p>select ‘Configure actor’</p></li>
<li><p>choose one of modes for setting “Run_compositions”
“from_input_CPO” - will pick up the COMPOSITIONS structure of the
COREPROF CPO from the input shot;
“configure_manually” - will force the composition from the values
specified below</p></li>
<li><p>specify values of AMN_ion, ZN_ion and Z_ion for ions, from the first
ion to the last [1:NION], separated by commas</p></li>
<li><p>specify values of AMN_imp, ZN_imp and max_Z_imp for impurity ions,
from the first to the last [1:NIMP], separated by commas</p></li>
<li><p>choose the neutrals types, which should be switched “ON”</p></li>
<li><p>Commit</p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_run_settings2_a.png" src="_images/ets_run_settings2_a.png" />
</div>
</div>
<div class="section" id="ets-a-4-10a-equations">
<span id="id7"></span><h4>3.3.4.3. Equations to be solved and boundary conditions<a class="headerlink" href="#ets-a-4-10a-equations" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id8">
<h5>3.3.4.3.1. Main plasma<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h5>
<p>Before starting the run you need to select the type and value of the
boundary conditions for all equations. Please note that the value should
correspond to the type. All equations allow for following types of
boundary conditions:</p>
<ul class="simple">
<li><p>OFF
- equation is not solved, initial profiles will be kept for whole run</p></li>
<li><p>value
- edge value should be specified</p></li>
<li><p>gradient
- edge gradient should be specified</p></li>
<li><p>scale_length
- edge scale length should be specified</p></li>
<li><p>generic
- 3 coefficients (a1,a2,a3) should be provided: a1*y´ + a2*y = a3</p></li>
<li><p>value_from_input_CPO
- equation is solved, edge value evolution will be red from input
shot</p></li>
<li><p>profile_from_input_CPO
- equation is not solved, profile evolution will be red from input
shot</p></li>
</ul>
<p>The particular equation will be activated if the boundary condition type
for it is other than <em>OFF</em>!</p>
<div class="figure align-center">
<img alt="_images/ets_run_boundary_a.png" src="_images/ets_run_boundary_a.png" />
</div>
<p>To set up boundary conditions:</p>
<ul class="simple">
<li><p>right click on the box ‘BEFORE THE TIME EVOLUTION’</p></li>
<li><p>select ‘Configure actor’</p></li>
<li><p>select appropriate boundary condition for each equation</p></li>
<li><p>specify values for boundary conditions corresponding to the type and
to the ion component</p></li>
<li><p>Commit</p></li>
</ul>
<p>!!! If electron density is solved, all ions with ni_bnd_type=OFF will be
computed from the quasineutrality condition and scaled proportional to
specified <em>ni_bnd_value</em> or inversely proportional to their charge
<em>(charge_proportional)</em>. This is defined by option:
<em>ni_from_quasineutrality</em>.</p>
</div>
<div class="section" id="id9">
<h5>3.3.4.3.2. Impurity<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h5>
<p>You can set up the boundary conditions for impurity ions in a similar
way as for main ions. !!! Note, that at the moment only types: <em>OFF</em>;
<em>value</em> and <em>value_from_input_CPO</em> are accepter by impurity solver.</p>
<p>To set up boundary conditions:</p>
<ul class="simple">
<li><p>right click on the box ‘BEFORE THE TIME EVOLUTION’</p></li>
<li><p>select ‘Configure actor’</p></li>
<li><p>select appropriate boundary condition for each impurity species
(OFF-equation is not solved)</p></li>
<li><p>specify values for boundary density of each impurity component
[1:MAX_Z_IMP], separated by commas</p></li>
<li><p>Commit</p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_run_boundary2_a.png" src="_images/ets_run_boundary2_a.png" />
</div>
<p>Interface for impurity boundary condition has additional option ,
<em>coronal_distribution</em>, that allow to preset the edge values or entire
profiles of individual ionization states from coronal distribution. In
tis case only single value is required to be specified for each impurity
boundary value. The options are:</p>
<ul class="simple">
<li><p>OFF
- the boundary values for impurity densities will be as they are
specified above;</p></li>
<li><p>boundary_conditions
- the boundary densities will be renormalized with corona, using the
first element from above as a total density</p></li>
<li><p>boundary_conditions_and_profiles
- the boundary densities and starting profiles will be renormalized
with corona, using the first element from above as a total density</p></li>
</ul>
</div>
<div class="section" id="id10">
<h5>3.3.4.3.3. Neutrals<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h5>
<p>!!! AT THE MOMENT BOUNDARY CONDITIONS FOR NEUTRAL VELOCITIES ARE
DISABLED, MIGHT BE ADDED ON REQUEST</p>
<p>Note, that ALL values should be specified in the order: <em>{1, 2, 3
…NION, 1, 2, 3, …NIMP}</em></p>
<p>To set up boundary conditions:</p>
<ul class="simple">
<li><p>right click on the box ‘BEFORE THE TIME EVOLUTION’</p></li>
<li><p>select ‘Configure actor’</p></li>
<li><p>select appropriate boundary condition for each neutral species
(OFF-equation is not solved)</p></li>
<li><p>specify values for boundary density and temperature of each neutral
component [1, 2, 3 …NION, 1, 2, 3, …NIMP], separated by commas</p></li>
<li><p>Commit</p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_run_boundary3_a.png" src="_images/ets_run_boundary3_a.png" />
</div>
</div>
<div class="section" id="id11">
<h5>3.3.4.3.4. Input Profiles Interpolation<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h5>
<p>You are going to start the ETS run from some input shot, which might
contain some conflicting rho grids. Thus there is a choice for the user
to decide on the grid on which the starting profiles should be load by
the worflow, <em>Interpolation_of_input_profiles</em>.</p>
<p>To define the interpolation grid select:</p>
<ul class="simple">
<li><p>on_RHO_TOR_grid
- interpolate input profiles based on the grid specyfied in [m];</p></li>
<li><p>on_RHO_TOR_NORM_grid
- interpolate input profiles based on normalised rho grid [0:1]</p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_run_boundary5_a.png" src="_images/ets_run_boundary5_a.png" />
</div>
</div>
</div>
<div class="section" id="ets-a-4-10a-convergence">
<span id="id12"></span><h4>3.3.4.4. Convergence loop<a class="headerlink" href="#ets-a-4-10a-convergence" title="Permalink to this headline">¶</a></h4>
<p>ETS updates input from different physics actors in a sequence, which is
finished by solving the transport equations. Ther are possible none-linear
couplings between different parts of the system. These nonelinearities are
trited by the ETS using iterations. The decision to step in time is made by
the ETS based on the criteria that the maximum relative deviation of main
plasma profiles is lower than some predefined tolerance. There is a number
of settings and sitches in the ETS that are used by the iterative scheme.
To edit them do:</p>
<ul class="simple">
<li><p>right click on the box ‘CONVERGENCE LOOP’</p></li>
<li><p>select ‘Configure actor’ to edit settings</p></li>
<li><p>choose your settings</p></li>
<li><p>Commit</p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_convergence1_a.png" src="_images/ets_convergence1_a.png" />
</div>
<p>Switches in the field <em>FREQUENCY OF CALLING THE PHYSICS ACTORS</em> define how
many times the the actors of a certain cathegory (equilibrium, transport,
etc.) should be called in a single time step. By selecting <em>YES</em> all actors
of this cathegory will be called every iteration By selecting <em>NO</em> all
actors of this cathegory will be called only ones in a time step</p>
<p>Switches and parameters in the field <em>CONTROL PARAMETERS</em> define how
iterations are done</p>
<ul class="simple">
<li><p>Tolerance
- defines the maximum relative error of profiles change compared to
previous iteration. If it is achieved the time steping is done.</p></li>
</ul>
<p>For highly none-linear case the required precision can be achieved faster
by the iterative scheme if only fraction of the new solution is mixed to
the previous state. The following scheme is adopted by the ets to reduce
none-linearities in profiles, transport coefficients and sources:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Y = (Amix * Y+) + ((1-Amix)*Y-)</span>
</pre></div>
</div>
<p>where Amix is the mixing fraction You can activate the mixing of profiles,
transport coefficient and sources by selecting the corresponding
<em>Mixing_fraction_…</em> to be between [0:1] You also can activate the
authomatic ajustment of this fraction by selecting: <em>Ajust_Mixing_for_…</em>
to <em>YES</em></p>
</div>
<div class="section" id="ets-a-4-10a-equilibrium">
<span id="id13"></span><h4>3.3.4.5. Equilibrium<a class="headerlink" href="#ets-a-4-10a-equilibrium" title="Permalink to this headline">¶</a></h4>
<div class="section" id="starting-settings">
<h5>3.3.4.5.1. Starting Settings<a class="headerlink" href="#starting-settings" title="Permalink to this headline">¶</a></h5>
<p>Before starting the run you need to set up your initial equlibrium. There
are several options to do it: if your input shot contains the consistent
equilibrium with all necessary parameters - you can start immediately from
it; if your input shot contains the equilibrium but it is not consistent or
some parameters are missing you can check it automatically; if your input
equilibrium is corrupt or not present - you can define the starting
equlinbrium by tree moment description. To select your starting equilibrium
please do:</p>
<ul class="simple">
<li><p>right click on the box ‘BEFORE THE TIME EVOLUTION’</p></li>
<li><p>select ‘Configure actor’ to edit settings</p></li>
<li><p>Select your settings or specify values</p></li>
<li><p>Commit</p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_eq_a.png" src="_images/ets_eq_a.png" />
</div>
<p>SETTINGS:</p>
<ul class="simple">
<li><p>Equilibrium_configuration
- select
configure_manually
if you like to specify configuration below; select
from_input_CPO
if all quantities should be picked up from the input CPO</p></li>
<li><p>Major_Radius_of_geom_axis_RGEO
- radius of the geometrical centre of the vessel [m]</p></li>
<li><p>Altitude_of_geom_axis_ZGEO
- altitude of the geometrical centre of the vessel [m]</p></li>
<li><p>Major_Radius_of_LCMS_centre_R0
- radius of the plasma centre [m]</p></li>
<li><p>Altitude_of_LCMS_centre_Z0
- altitude of the plasma centre [m]</p></li>
<li><p>Magn_field_on_LCMS_centre_B0
- vacume magnetic field at R0 [T]</p></li>
<li><p>Total_plasma_current_IP
- plasma current within the LCMS [A]</p></li>
<li><p>Minor_radius
- minor radius of the LCMS [m]</p></li>
<li><p>Elongation
- elongation of the LCMS [-]</p></li>
<li><p>Triangularity_upper
- upper triangularity of the LCMS [-]</p></li>
<li><p>Triangularity_lower
- lower triangularity of the LCMS [-]</p></li>
<li><p>Equilibrium code
- select one of available equilibrium solvers to check the
consistency between starting equilibrium and current profile; use
INTERPRETATIVE
if you trust your input data (in this case the check will be
ignorred).</p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_eq2_a.png" src="_images/ets_eq2_a.png" />
</div>
<p>Please note, that different equilibrium solvers might require slightly
different input. Thus it is a user responsibility to check that the
information inside input shot/run is enough to run selected equilibrium
solver.</p>
</div>
<div class="section" id="id14">
<h5>3.3.4.5.2. Run Settings<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h5>
<p>There are several equilibrium solvers connected to the ETS. You can
select the one of them.Therefore please do:</p>
<ul class="simple">
<li><p>right click on the box ‘CONVERGENCE LOOP’</p></li>
<li><p>select ‘Open actor’</p></li>
<li><p>right click on the box ‘EQUILIBRIUM’</p></li>
<li><p>select ‘Configure actor’ to edit settings</p></li>
<li><p>choose your equilibrium solver</p></li>
<li><p>Commit</p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_eq3_a.png" src="_images/ets_eq3_a.png" />
</div>
<p><em>INTERPRETATIVE</em> means that the ETS will not update the equilibrium,
instead it will be using the initial equilibrium.</p>
<p>Please note, that it is better to select the same code as you used for
pre-iterrations. Because outputs of different equilibrium solver are not
necessary done with the same resolution. Therefore the routine saving
the information to the data base might brake due to uncompatible sizes
of some signals.</p>
<div class="figure align-center">
<img alt="_images/ets_eq4_a.png" src="_images/ets_eq4_a.png" />
</div>
</div>
</div>
<div class="section" id="ets-a-4-10a-transport">
<span id="id15"></span><h4>3.3.4.6. Transport<a class="headerlink" href="#ets-a-4-10a-transport" title="Permalink to this headline">¶</a></h4>
<p>The settings for TRANSPORT can be done inside the CONVERGENCE LOOP
composite actor. Therefore please do:</p>
<ul class="simple">
<li><p>right click on the box ‘CONVERGENCE LOOP’</p></li>
<li><p>select ‘Open actor’</p></li>
<li><p>right click on the box ‘TRANSPORT’</p></li>
<li><p>select ‘Configure actor’ to edit settings</p></li>
<li><p>choose your settings</p></li>
<li><p>Commit</p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_transport1_a.png" src="_images/ets_transport1_a.png" />
</div>
<div class="section" id="choice-of-transport-model">
<h5>3.3.4.6.1. Choice of transport model<a class="headerlink" href="#choice-of-transport-model" title="Permalink to this headline">¶</a></h5>
<p>ETS constructs the total transport coefficients from the combination of
Anomalous transport (model choice), Neoclassical transport (model
choice) and Database transport (transport coefficients be saved to the
input shot)</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">D_tot = D_DB*M_DB + D_AN*M_AN + D_NC*M_NC</span>
</pre></div>
</div>
<p>You should choose from the list of evailable models in each cathegory or
switch it OFF</p>
<p>The list of available transport models can be found
<a class="reference external" href="https://www.eufus.eu/documentation/EU-IM/html/ets_status.html">here</a>.</p>
<div class="figure align-center">
<img alt="_images/ets_transport2_a.png" src="_images/ets_transport2_a.png" />
</div>
</div>
<div class="section" id="main-plasma-transport">
<h5>3.3.4.6.2. Main plasma transport<a class="headerlink" href="#main-plasma-transport" title="Permalink to this headline">¶</a></h5>
<p>In this section you define how total transport coefficients for main
ions should be constructed from contributions provided by different
models. You need to provide the multipliers for Anomalous, Neoclassical
and Database contributions, which will determine their weights in total
transport coefficient.</p>
<p>You also can add the constant background level for each coefficient (ion
coefficients are expected to be the string {1:NION}, separated by
commas)</p>
<div class="figure align-center">
<img alt="_images/ets_transport3_a.png" src="_images/ets_transport3_a.png" />
</div>
</div>
<div class="section" id="impurity-transport">
<h5>3.3.4.6.3. Impurity transport<a class="headerlink" href="#impurity-transport" title="Permalink to this headline">¶</a></h5>
<p>In this section you define how total transport coefficients for impurity
ions should be constructed from contributions provided by different
models. You need to provide the multipliers for Anomalous, Neoclassical
and Database contributions, which will determine their weights in total
transport coefficient.</p>
<p>You also can add the constant background level for each coefficient
(coefficients are expected to be the string {1:NIMP}, separated by
commas)</p>
<p>In addition, there is an option to import the Anomalous component of
transport coefficient <em>from_first_ion</em> or <em>from_electrons</em> (the same
anomalous contribution will be added to all impurity components, all
ionization states)</p>
<div class="figure align-center">
<img alt="_images/ets_transport4_a.png" src="_images/ets_transport4_a.png" />
</div>
</div>
<div class="section" id="id16">
<h5>3.3.4.6.4. Edge transport barrier<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h5>
<p>In this section you can artificially supress the transport outside of
specified <em>RHO_TOR_NORM_ETB</em>. Total transport coefficients for all
transport channels (ne, ni, nz, Te, Ti,…) will be reduced to constant
values specified below (ion and impurity coefficients are expected to be
the strings {1:NION}) and {1:NIMP} respectively)</p>
<div class="figure align-center">
<img alt="_images/ets_transport5_a.png" src="_images/ets_transport5_a.png" />
</div>
</div>
<div class="section" id="id17">
<h5>3.3.4.6.5. Total transport coefficients<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h5>
<p>Profiles of the total transport coefficient for each channel are
obtained from the the individual contributions (Data Base, Anomalous,
Neoclassical and Background) as a summ of all activated transport models
multiplied with coefficients specified on the interface of the composite
actor.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">X_tot = X_DB*DBM + X_AN*ANM + X_NC*NCM + X_BG*BGM</span>
</pre></div>
</div>
<p>!!! Note, that contributions to all transport equations will be
multiplied with the same value. For example: if
AnomalousTransportMultiplier=3.0, then contibutions from selected
anomalous transport model to each transport equation will be multiplied
with 3.0</p>
<p>The fine tuning of of transport coefficients can be done through editing
the XML code parameters of the transport combiner actor:</p>
<ul class="simple">
<li><p>right click on the box ‘TRANSPORT’</p></li>
<li><p>select ‘Open actor’ to edit settings</p></li>
<li><p>right click on the box ‘Transport Combiner’</p></li>
<li><p>select ‘Open actor’ to edit settings</p></li>
<li><p>right click on the box ‘transportcombiner’</p></li>
<li><p>select ‘Configure actor’</p></li>
<li><p>click ‘Edit Code Parameters’</p></li>
<li><p>If you select <em>OFF</em> contributions from all transport models to this
channel will be nullified; If you select <em>from_input_CPOs</em> the
transport channel will be activated, and the total transport
coefficient will be combined from active tranport models; For
convective velocity there is an additional option
<em>fixed_V_over_D_ratio</em>, by selecting this the combiner will ignore
the convective components provided by transport nmodels. The
convective velocity will be determined from the total diffusion
coefficient by applying fixed V/D ratio (<em>for inward pinch the values
should be negative!</em>). For all active channels you can adjust
multipliers for combining contributions from different transport
models (array of four space separated values is expected):</p>
<ul>
<li><p>first position - Data Base transport coefficients;</p></li>
<li><p>second position – Anomalous transport coefficients;</p></li>
<li><p>third position – Neoclassical transport coefficients;</p></li>
<li><p>fourth position – Background (constant level) transport
coefficients;</p></li>
</ul>
</li>
<li><p>save and exit</p></li>
<li><p>Commit</p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_transport5_a.png" src="_images/ets_transport5_a.png" />
</div>
</div>
</div>
<div class="section" id="ets-a-4-10a-mhd">
<span id="id18"></span><h4>3.3.4.7. MHD<a class="headerlink" href="#ets-a-4-10a-mhd" title="Permalink to this headline">¶</a></h4>
<p>The settings for MHD type of events can be done inside the CONVERGENCE
LOOP composite actor. Therefore please do:</p>
<ul class="simple">
<li><p>right click on the box ‘CONVERGENCE LOOP’</p></li>
<li><p>select ‘Open actor’</p></li>
<li><p>right click on the box ‘MHD’</p></li>
<li><p>select ‘Configure actor’ to edit settings</p></li>
<li><p>choose your settings</p></li>
<li><p>Commit</p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_mhd_a.png" src="_images/ets_mhd_a.png" />
</div>
<p>At the moment ETS allows only for NTM to be activated.</p>
<p>User can ajust the following NTM settings:</p>
<ul class="simple">
<li><p>NTM –
ON
means that ETS will add the NTM driven transport to the total
transport coefficient;
OFF-ignored</p></li>
<li><p>NTMTransportMultiplier – the transport contrinution from NTM will be
multiplied with this value</p></li>
<li><p>Onset_NTM_time - activation time for the NTM mode</p></li>
<li><p>Onset_NTM_width - starting width of the mode</p></li>
<li><p>m_NTM_poloidal_number</p></li>
<li><p>n_NTM_toroidal_number</p></li>
<li><p>NTM_phase</p></li>
<li><p>NTM_frequency</p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_mhd2_a.png" src="_images/ets_mhd2_a.png" />
</div>
</div>
<div class="section" id="ets-a-4-10a-sources">
<span id="id19"></span><h4>3.3.4.8. Sources and impurity<a class="headerlink" href="#ets-a-4-10a-sources" title="Permalink to this headline">¶</a></h4>
<p>The settings for SOURCES AND IMPURITY can be done inside the CONVERGENCE
LOOP composite actor. Therefore please do:</p>
<ul class="simple">
<li><p>right click on the box ‘CONVERGENCE LOOP’</p></li>
<li><p>select ‘Open actor’</p></li>
<li><p>right click on the box ‘SOURCES AND IMPURITY’</p></li>
<li><p>select ‘Configure actor’ to edit settings</p></li>
<li><p>choose your settings</p></li>
<li><p>Commit</p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_sources1_a.png" src="_images/ets_sources1_a.png" />
</div>
<div class="section" id="imp3-sources">
<h5>3.3.4.8.1. IMP3 sources<a class="headerlink" href="#imp3-sources" title="Permalink to this headline">¶</a></h5>
<p>There is a number of sources developed by IMP3 project, which are actors
or internal routines of the transport solver. You can activate them by
selecting <em>ON / OFF</em> in front of corresponding source:</p>
<ul class="simple">
<li><p>Database Sources –
ON
- ETS will pick up the evolution of source profiles saved to your
input shot/run;
OFF -ignored</p></li>
<li><p>Ohmic Heating –
ON
- ETS will compute Ohmic heating internaly;
OFF-ignored</p></li>
<li><p>Gaussian Sources –
ON
- ETS will add sources from the Gaussian source actor (you can
configure heat and particle deposition profiles by editing the code
parameters of the actor);
OFF-ignored</p></li>
<li><p>Neutral Sources–
ON
- Fluid neutrals will be solved according to the boundary conditions
specified on ¨Before_time_evolution¨ composite actor interface;
OFF -ignored</p></li>
<li><p>Switch_IMPURITY–
ON
- Impurity density and radiative sources will be computed;
OFF
-ignored;
INTERPRETATIVE
– profiles of impurity density will be read from input shot/run</p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_sources2_a.png" src="_images/ets_sources2_a.png" />
</div>
</div>
<div class="section" id="imp5hcd-sources">
<h5>3.3.4.8.2. IMP5HCD sources<a class="headerlink" href="#imp5hcd-sources" title="Permalink to this headline">¶</a></h5>
<p>There is a number of sources developed by IMP5 project, that are
incorporated by the ETS workflow.</p>
<p>For the IMP5HCD sources please activate the type of heating source, by
ticking the box in front of it, and select the code to simulate it.</p>
<div class="figure align-center">
<img alt="_images/ets_sources3_a.png" src="_images/ets_sources3_a.png" />
</div>
<p>You also need to configure initial IMP5HCD settings. Therefore please:</p>
<ul class="simple">
<li><p>right click on the box ‘BEFORE THE TIME EVOLUTION’</p></li>
<li><p>select ‘Open Actor’</p></li>
<li><p>right click on the box ‘SETTINGS FOR HEATING AND CURRENT DRIVE’</p></li>
<li><p>select ‘Configure actor’</p></li>
<li><p>edit the stettings</p></li>
<li><p>Commit</p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_sources4_a.png" src="_images/ets_sources4_a.png" />
</div>
<p>The detailed information on initial IMP5HCD settings can be found
<a class="reference external" href="https://www.eufus.eu/documentation/EU-IM/html/imp5_imp5hcd.html">here</a>.
Please note that settings for NBI are done independent for each PINI.
Therefore, for NBI settings, please insert the values separated by
commas. The number of the element in the array corresponds to the number
of activated PINI. Maximum accepted number of PINIs = 16.</p>
<div class="figure align-center">
<img alt="_images/ets_sources5_a.png" src="_images/ets_sources5_a.png" />
</div>
</div>
<div class="section" id="id20">
<h5>3.3.4.8.3. Power control<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h5>
<p>You also can activate the power control for the IMP5HCD sources.</p>
<div class="figure align-center">
<img alt="_images/ets_sources6_a.png" src="_images/ets_sources6_a.png" />
</div>
<p>If the POWER_CONTROL is not <em>OFF</em>, there are two modes of
operation:<em>specific</em> and <em>frequency</em></p>
<p>For <em>specific</em> you should specify the time sequence separated by commas
and the corresponding power sequence (where first power level
corresponds to the first time, second to second and etc.). Linear
interpolation will be done between the sequence points. For example: if
you give the power sequence = 2e6,4e6,1e6 and times = 0.0, 0.7, 1.5 (s)
the delivered power would be:</p>
<div class="figure align-center">
<img alt="_images/ets_sources7_a.png" src="_images/ets_sources7_a.png" />
</div>
<p>For <em>frequency</em> you should specify the power levels sequence separated
by commas, start and end time of the power control and the frequency of
switching between these levels. For example: if you give the power
sequence = 2e6,4e6,1e6 and frequency = 10 (Hz) tstart =0.0 (s) tend =
1.5 (s) the delivered power would be:</p>
<div class="figure align-center">
<img alt="_images/ets_sources8_a.png" src="_images/ets_sources8_a.png" />
</div>
</div>
<div class="section" id="id21">
<h5>3.3.4.8.4. Total power<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h5>
<p>Profiles of the total source for each channel are obtained from the the
individual contributions (Data Base, Gaussian, Neutrals, Impurity and
HCD) as a summ of all activated sources multiplied with coefficients
specified on the interface of the composite actor.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">S_tot</span> <span class="o">=</span> <span class="n">S_DS</span><span class="o">*</span><span class="n">DSM</span> <span class="o">+</span> <span class="n">S_GS</span><span class="o">*</span><span class="n">GSM</span> <span class="o">+</span> <span class="n">S_Neu</span><span class="o">*</span><span class="n">NeuSM</span> <span class="o">+</span> <span class="n">S_IMP</span><span class="o">*</span><span class="n">IMPSM</span> <span class="o">+</span> <span class="n">S_HCD</span><span class="o">*</span><span class="n">HCDSM</span>
</pre></div>
</div>
<p>!!! Note, that contributions to all transport equations will be
multiplied with the same value. For example: if
ImpuritySourceMultiplier=3.0, then contibutions from impurity to Se, Sz
and Qe will be multiplied with 3.0</p>
<p>The fine tuning of of sources can be done through editing the XML code
parameters of the source combiner actor:</p>
<ul class="simple">
<li><p>right click on the box ‘SOURCES and IMPURITY’</p></li>
<li><p>select ‘Open actor’ to edit settings</p></li>
<li><p>right click on the box ‘Source Combiner’</p></li>
<li><p>select ‘Open actor’ to edit settings</p></li>
<li><p>right click on the box ‘sourcecombiner’</p></li>
<li><p>select ‘Configure actor’</p></li>
<li><p>click ‘Edit Code Parameters’</p></li>
<li><p>If you like the sources to the particular equation being activated -
select <em>from_input_CPOs</em>; if you select <em>OFF</em> contributions from all
sources to this channel will be nullified. For active channels you
can adjust multipliers for combining contributions from different
source modules (array of five space separated values is expected):</p>
<ul>
<li><p>first position - Data Base sources;</p></li>
<li><p>second position – Gaussian sources;</p></li>
<li><p>third position – HCD sources;</p></li>
<li><p>fourth position – Neutral sources;</p></li>
<li><p>fifth position – Impurity sources.</p></li>
</ul>
</li>
<li><p>save and exit</p></li>
<li><p>Commit</p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_sources9_a.png" src="_images/ets_sources9_a.png" />
</div>
</div>
</div>
<div class="section" id="instantaneous-events">
<span id="ets-a-4-10a-inst-events"></span><h4>3.3.4.9. Instantaneous events<a class="headerlink" href="#instantaneous-events" title="Permalink to this headline">¶</a></h4>
<p>At the moment, user can swith ON and OFF two types of events: PELLET and
SAWTOOTH</p>
<div class="section" id="id22">
<h5>3.3.4.9.1. Pellet<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h5>
<p>At the top level of the workflow you can configure times for pellet
injection</p>
<ul class="simple">
<li><p>right click on the box ‘INSTANTANEOUS EVENTS’</p></li>
<li><p>select ‘Configure actor’ to edit settings</p></li>
<li><p>Select Pellet_injection ‘ON’ if you like to use pellet in your
simulation</p></li>
<li><p>Select mode of operation: ‘specific’ - pellets will be shut at
specific times, you also need to specify array ‘times_pellet’</p>
<ul>
<li><p>‘specific’ - pellets will be shut at exact times specified in
array ‘times_pellet’</p></li>
<li><p>‘frequency’ – pellets will be shut from ‘tstart_pellet’ until
‘tend_pellet’ with a ’frequency_pellet’</p></li>
</ul>
</li>
<li><p>‘frequency’ – pellets will be shut from ‘tstart_pellet’ until
‘tend_pellet’ with a ’frequency_pellet’</p></li>
<li><p>Commit</p></li>
</ul>
<div class="figure align-center">
<img alt="_images/eps_instantaneous_events_a.png" src="_images/eps_instantaneous_events_a.png" />
</div>
<p>Parameters of individual pellet need to be configured through the
icode_parameters of the PELLET actor. To access it go to ‘Outline’ on
the right upper corner and open the following:</p>
<div class="figure align-center">
<img alt="_images/eps_instantaneous_events2_a.png" src="_images/eps_instantaneous_events2_a.png" />
</div>
<ul class="simple">
<li><p>right click on the actor ‘PELLET’</p></li>
<li><p>select ‘Configure actor’</p></li>
<li><p>click ‘Edit Code Parameters’</p></li>
<li><p>edit parameters and click ‘save and exit’</p></li>
<li><p>Commit</p></li>
</ul>
<div class="figure align-center">
<img alt="_images/eps_instantaneous_events3_a.png" src="_images/eps_instantaneous_events3_a.png" />
</div>
<p><em>amn</em> – atomic mass number: array of elements separated by space
(1:nelements) [-]</p>
<p><em>zn</em> – nuclear charge: array of elements separated by space
(1:nelements) [-]</p>
<p><em>fraction</em> – fraction of each element in the pellet, based on the number
of atoms: array of elements separated by space (1:nelements) [-]</p>
<p><em>rpell</em> – radius of the pellet [m]</p>
<p><em>vpell</em> – velocity of the pellet [m/s]</p>
<p><em>rcloud</em> – radius of the pellet cloud [m], radial extension of the cloud
= 2*rp0</p>
<p><em>lcloud</em> – length of the pellet cloud along the field line [m]</p>
<p><em>Tcloud</em> – temperature of the pellet cloud [eV]</p>
<p>Pellet path is specified by two points, for which R and Z coordinated
should be specified</p>
<p><em>R</em> – R coordinates of the pivot and second points of the pellet path,
separated by space [m]</p>
<p><em>Z</em> – Z coordinates of the pivot and second points of the pellet path,
separated by space [m]</p>
<p>Control switches allow to activate:</p>
<ul class="simple">
<li><p>drifts
- YES - will activate radial displacement of deposition profile, same
for all path points</p></li>
<li><p>cooling
- YES - will activate cooling of the other side of the plasma due to
parallel heat transport (essential for large pellets, which might
cross the same flux surface twice)</p></li>
<li><p>JINTRAC
- YES - will provide temperature reduction consistent with the model
used in JETTO</p></li>
</ul>
</div>
<div class="section" id="id23">
<h5>3.3.4.9.2. MHD<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h5>
<p>At the top level of the workflow you can switch ON/OFF possible MHD
events</p>
<ul class="simple">
<li><p>right click on the box ‘INSTANTANEOUS EVENTS’</p></li>
<li><p>select ‘Configure actor’ to edit settings</p></li>
<li><p>Select SAWTOOTH ‘ON’ if you like to use them in your simulation</p></li>
<li><p>Commit</p></li>
</ul>
</div>
</div>
<div class="section" id="visualization-during-the-run">
<span id="ets-a-4-10a-visualization"></span><h4>3.3.4.10. Visualization during the run<a class="headerlink" href="#visualization-during-the-run" title="Permalink to this headline">¶</a></h4>
<p>There is a number tools visualizing the ETS run.</p>
<div class="section" id="id24">
<h5>3.3.4.10.1. Multiple Tab Display<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h5>
<p>The display appeares automaticaly when the ETS workflow is launched. It
displays diagnostic text messages from the workflow on following topics:</p>
<ul class="simple">
<li><p>Input data statement</p></li>
<li><p>Iterations to check the initial convergence between EQUILIBRIUM and
CURRENT</p></li>
<li><p>Time evolution</p></li>
<li><p>Convergence of iteratinos within the time step</p></li>
<li><p>IMP5HCD settings</p></li>
<li><p>Power used by IMP5HCD actors durung the run</p></li>
</ul>
<p>Also the error messages from execution of the workflow will be displayed
here.</p>
<div class="figure align-center">
<img alt="_images/ets_visual1_a.png" src="_images/ets_visual1_a.png" />
</div>
</div>
<div class="section" id="id25">
<h5>3.3.4.10.2. Python Visualization Display<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h5>
<p>You can activate the graphical visualization of your run evolution:</p>
<ul class="simple">
<li><p>right click on the box ‘Check Time &amp; Save Slice’</p></li>
<li><p>select ‘Configure actor’</p></li>
<li><p>select visualisation ‘YES’ or ‘NO’</p></li>
<li><p>Commit</p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_visual2_a.png" src="_images/ets_visual2_a.png" />
</div>
<p>Then evolution of main discharge parameters will be shown in this
window:</p>
<div class="figure align-center">
<img alt="_images/ets_visual3_a.png" src="_images/ets_visual3_a.png" />
</div>
<div class="section" id="ets-c">
<span id="ets-c-kepler"></span><h6>3.3.4.10.2.1. ETS_C<a class="headerlink" href="#ets-c" title="Permalink to this headline">¶</a></h6>
<p>The ETS workflow (IMP3-ACT1) is used for 1-D transport simulation of a
tokamak core plasma.</p>
<p><strong>ETS workflow in KEPLER</strong>:</p>
<ul class="simple">
<li><p>uses as actors and composite actors from other IMPs, thus for the
most recent versions of them please check with relevant project</p></li>
<li><p>complex, but clearly structured workflow, which offers user friendly
interface for configuring the simulation</p></li>
<li><dl class="simple">
<dt>allows for easy modifications (connecting new modules, or reconnecting</dt><dd><p>the parts of the workflow) through the easy graphical interface</p>
</dd>
</dl>
</li>
<li><p>provides users with all updates through the version control system</p></li>
<li><p>still actively developing tool</p></li>
</ul>
<div class="figure align-center">
<img alt="_images/ets_c.png" src="_images/ets_c.png" />
</div>
</div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="edge.html" class="btn btn-neutral float-right" title="4. Edge Transport Simulator" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="infrastructure.html" class="btn btn-neutral float-left" title="2. Infrastructure" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, WPCD

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>